window.sedApp=window.sedApp||{},function(a,b){var c,d,e,f,g=Array.prototype.slice;d=function(a,b){var c=f(this,a,b);return c.extend=this.extend,c},e=function(){},f=function(a,c,d){var f;return f=c&&c.hasOwnProperty("constructor")?c.constructor:function(){var b=a.apply(this,arguments);return b},b.extend(f,a),e.prototype=a.prototype,f.prototype=new e,c&&b.extend(f.prototype,c),d&&b.extend(f,d),f.prototype.constructor=f,f.__super__=a.prototype,f},c={},c.Class=function(a,d,e){var f,g=arguments;return a&&d&&c.Class.applicator===a&&(g=d,b.extend(this,e||{})),f=this,this.instance&&(f=function(){return f.instance.apply(f,arguments)},b.extend(f,this)),f.initialize.apply(f,g),f},c.Class.applicator={},c.Class.prototype.initialize=function(){},c.Class.prototype.extended=function(a){for(var b=this;"undefined"!=typeof b.constructor;){if(b.constructor===a)return!0;if("undefined"==typeof b.constructor.__super__)return!1;b=b.constructor.__super__}return!1},c.Class.extend=d,c.Events={trigger:function(a){return this.topics&&this.topics[a]&&this.topics[a].fireWith(this,g.call(arguments,1)),this},bind:function(a){return this.topics=this.topics||{},this.topics[a]=this.topics[a]||b.Callbacks(),this.topics[a].add.apply(this.topics[a],g.call(arguments,1)),this},unbind:function(a){return this.topics&&this.topics[a]&&this.topics[a].remove.apply(this.topics[a],g.call(arguments,1)),this}},c.Value=c.Class.extend({initialize:function(a,c){this._value=a,this.callbacks=b.Callbacks(),this._dirty=!1,b.extend(this,c||{}),this.set=b.proxy(this.set,this)},instance:function(){return arguments.length?this.set.apply(this,arguments):this.get()},get:function(){return this._value},set:function(a){var c=this._value;return a=this._setter.apply(this,arguments),a=this.validate(a),null===a||_.isEqual(c,a)&&b.inArray(this.stype,["module","style-editor"])==-1?this:(this._value=a,this._dirty=!0,this.callbacks.fireWith(this,[a,c]),this)},_setter:function(a){return a},setter:function(a){var b=this.get();return this._setter=a,this._value=null,this.set(b),this},resetSetter:function(){return this._setter=this.constructor.prototype._setter,this.set(this.get()),this},validate:function(a){return a},bind:function(){return this.callbacks.add.apply(this.callbacks,arguments),this},unbind:function(){return this.callbacks.remove.apply(this.callbacks,arguments),this},link:function(){var a=this.set;return b.each(arguments,function(){this.bind(a)}),this},unlink:function(){var a=this.set;return b.each(arguments,function(){this.unbind(a)}),this},sync:function(){var a=this;return b.each(arguments,function(){a.link(this),this.link(a)}),this},unsync:function(){var a=this;return b.each(arguments,function(){a.unlink(this),this.unlink(a)}),this}}),c.Values=c.Class.extend({defaultConstructor:c.Value,initialize:function(a){b.extend(this,a||{}),this._value={},this._deferreds={}},instance:function(a){return 1===arguments.length?this.value(a):this.when.apply(this,arguments)},value:function(a){return this._value[a]},has:function(a){return"undefined"!=typeof this._value[a]},add:function(a,b){return this.has(a)?this.value(a):(this._value[a]=b,b.parent=this,b.extended(c.Value)&&b.bind(this._change),this.trigger("add",b),this._deferreds[a]&&this._deferreds[a].resolve(),this._value[a])},create:function(a){return this.add(a,new this.defaultConstructor(c.Class.applicator,g.call(arguments,1)))},each:function(a,c){c="undefined"==typeof c?this:c,b.each(this._value,function(b,d){a.call(c,d,b)})},remove:function(a){var b;this.has(a)&&(b=this.value(a),this.trigger("remove",b),b.extended(c.Value)&&b.unbind(this._change),delete b.parent),delete this._value[a],delete this._deferreds[a]},when:function(){var a=this,c=g.call(arguments),d=b.Deferred();return b.isFunction(c[c.length-1])&&d.done(c.pop()),b.when.apply(b,b.map(c,function(c){if(!a.has(c))return a._deferreds[c]=a._deferreds[c]||b.Deferred()})).done(function(){var e=b.map(c,function(b){return a(b)});return e.length!==c.length?void a.when.apply(a,c).done(function(){d.resolveWith(a,e)}):void d.resolveWith(a,e)}),d.promise()},_change:function(){this.parent.trigger("change",this)}}),b.extend(c.Values.prototype,c.Events),c.ensure=function(a){return"string"==typeof a?b(a):a},c.Element=c.Value.extend({initialize:function(a,d){var e,f,g,h=this,i=c.Element.synchronizer.html;this.element=c.ensure(a),this.events="",this.element.is("input, select, textarea")&&(this.events+="change",i=c.Element.synchronizer.val,this.element.is("input")?(e=this.element.prop("type"),c.Element.synchronizer[e]&&(i=c.Element.synchronizer[e]),"text"===e||"password"===e?this.events+=" keyup":"range"===e&&(this.events+=" input propertychange")):this.element.is("textarea")&&(this.events+=" keyup")),c.Value.prototype.initialize.call(this,null,b.extend(d||{},i)),this._value=this.get(),f=this.update,g=this.refresh,this.update=function(a){a!==g.call(h)&&f.apply(this,arguments)},this.refresh=function(){h.set(g.call(h))},this.bind(this.update),this.element.bind(this.events,this.refresh)},find:function(a){return b(a,this.element)},refresh:function(){},update:function(){}}),c.Element.synchronizer={},b.each(["html","val"],function(a,b){c.Element.synchronizer[b]={update:function(a){this.element[b](a)},refresh:function(){return this.element[b]()}}}),c.Element.synchronizer.checkbox={update:function(a){this.element.prop("checked",a)},refresh:function(){return this.element.prop("checked")}},c.Element.synchronizer.radio={update:function(a){this.element.filter(function(){return this.value===a}).prop("checked",!0)},refresh:function(){return this.element.filter(":checked").val()}},b.support.postMessage=!!window.postMessage,c.Messenger=c.Class.extend({add:function(a,b,d){return this[a]=new c.Value(b,d)},initialize:function(a,c){var d=window.parent==window?null:window.parent;b.extend(this,c||{}),this.add("channel",a.channel),this.add("url",a.url||""),this.add("origin",this.url()).link(this.url).setter(function(a){return a.replace(/([^:]+:\/\/[^\/]+).*/,"$1")}),this.add("targetWindow",null),this.targetWindow.set=function(a){var b=this._value;return a=this._setter.apply(this,arguments),a=this.validate(a),null===a||b===a?this:(this._value=a,this._dirty=!0,this.callbacks.fireWith(this,[a,b]),this)},this.targetWindow(a.targetWindow||d),this.receive=b.proxy(this.receive,this),this.receive.guid=b.guid++,b(window).on("message",this.receive)},destroy:function(){b(window).off("message",this.receive)},receive:function(a){var b;a=a.originalEvent,this.targetWindow()&&(this.origin()&&a.origin!==this.origin()||"string"==typeof a.data&&"{"===a.data[0]&&(b=JSON.parse(a.data),b&&b.id&&"undefined"!=typeof b.data&&((b.channel||this.channel())&&this.channel()!==b.channel||this.trigger(b.id,b.data))))},send:function(a,b){var c;b="undefined"==typeof b?null:b,this.url()&&this.targetWindow()&&(c={id:a,data:b},this.channel()&&(c.channel=this.channel()),this.targetWindow().postMessage(JSON.stringify(c),this.origin()))}}),b.extend(c.Messenger.prototype,c.Events),c=b.extend(new c.Values,c),c.get=function(){var a={};return this.each(function(b,c){a[c]=b.get()}),a},c.Filters=c.Class.extend({initialize:function(){this.topics={}},add:function(a,b,c){_.isUndefined(this.topics[a])&&(this.topics[a]=[]),this.topics[a].push({callback:b,priority:c||10,type:"add"})},remove:function(a,b,c){_.isUndefined(this.topics[a])&&(this.topics[a]=[]),this.topics[a].push({callback:b,priority:c||10,type:"remove"})},render:function(a,c){if(_.isUndefined(this.topics[a]))return c.length>0&&c[0];var d,e=_.sortBy(this.topics[a],"priority");return _.each(e,b.proxy(function(a){a.callback;d=a.callback.apply(a,c)},this)),d}}),c.filters=new c.Filters,c.applyFilters=function(a){return c.filters.render(a,g.call(arguments,1))},c.addFilter=function(a,b,d){c.filters.add(a,b,d)},c.log=function(){var a=arguments,c=!1;0!=a.length&&c!==!1&&(console&&console.log?console.log.apply(console,a):(b.each(a,function(a,b){alert(b)}),alert(msg)))},c.currentSedElementId="",c.fn={},c.fn.ucfirst=function(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)},c.fn.urldecode=function(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))},c.fn.urlencode=function(a){return a=(a+"").toString(),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},c.fn.rawurldecode=function(a){return decodeURIComponent(a+"")},c.fn.rawurlencode=function(a){return a=(a+"").toString(),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},a.editor=c}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.SiteEditorShortcode=c.Class.extend({findChildren:function(a,c){var d=this,e=[];return b.each(a,function(f,g){g.parent_id==c&&(e.push(g),e=b.merge(e,d.findChildren(a,g.id)))}),e},findParentOf:function(a,c){var d=[];return b.each(a,function(a,b){b.parent_id==c&&d.push(b)}),d},index:function(a,b){return _.findIndex(b,{id:a})},findModelsById:function(a,b){var c=_.findWhere(a,{id:b});if(_.isUndefined(c)||!c)return[];var d=this.findChildren(a,b)||[];return d.unshift(c),d},clone:function(a){var c=_.map(a,function(a){var c=b.extend(!0,{},a);return c});return c},getModelsType:function(){var a=b("#website")[0].contentWindow.jQuery('[sed_model_id="'+c.currentTargetElementId+'"]'),d=a.parents(".sed-pb-post-container:first");return d.data("contentType")},readyPattern:function(a){var b=this.clone(a);return b=this.modifyModelsIds(b),_.isUndefined(b[0].theme_id)||delete b[0].theme_id,_.isUndefined(b[0].is_customize)||delete b[0].is_customize,b},modifyModelsIds:function(a){var b=this;return this.Ids={},a=_.map(a,function(a){var d=c.pageBuilder.getNewId();return b.Ids[a.id]=d,a.id=d,a.attrs.sed_model_id=d,a}),a=_.map(a,function(a){return _.isUndefined(b.Ids[a.parent_id])||(a.parent_id=b.Ids[a.parent_id]),a})},getContentModel:function(a){var d=b("body").hasClass("siteeditor-app")?b('[sed_model_id="'+a+'"]'):b("#website")[0].contentWindow.jQuery('[sed_model_id="'+a+'"]'),e=d.parents(".sed-pb-post-container:first"),f=e.data("contentType"),g=e.data("postId");if("theme"==f)var h=c.pagesThemeContent[g];else var h=c.postsContent[g];return h},replaceModel:function(a,c){var d=this.getContentModel(a),e=this.index(a,d),f=c.length,g=b.merge([e,f],c);Array.prototype.splice.apply(d,g)},getShortcode:function(a){var b=this.getContentModel(a),c=_.findWhere(b,{id:a});return c},getAttrs:function(a,c){c=!(_.isUndefined(c)||c!==!0);var d=this.getShortcode(a);if(d){if(c===!1)return d.attrs;var e=this.getContentModel(a),f=_.findWhere(e,{tag:"content",parent_id:a});if(!f)return d.attrs;var g=b.extend(!0,{},d.attrs);return g.sed_shortcode_content=f.content,g}},getPatternScripts:function(a){var d=[];return _.each(a,function(a){_.isUndefined(c.shortcodes[a.tag])||(d=b.merge(d,c.shortcodesScripts[a.tag]||[]))}),d},getPatternModulesScripts:function(a){var b=[];return _.each(a,function(a){if(!_.isUndefined(c.shortcodes[a.tag])){var d=c.shortcodes[a.tag];!_.isUndefined(d.asModule)&&d.asModule&&(_.isUndefined(c.ModulesEditorJs[d.moduleName])||b.push(c.ModulesEditorJs[d.moduleName]))}}),b},getPatternStyles:function(a){var d=[];return _.each(a,function(a){_.isUndefined(c.shortcodes[a.tag])||(d=b.merge(d,c.shortcodesStyles[a.tag]||[]))}),d},getPatternTransport:function(a){var d="default";return b.each(a,function(a,b){if(!_.isUndefined(c.shortcodes[b.tag])){var e=c.pageBuilder.getModuleTransport(b.tag,"shortcode");if("ajax"==e)return d="ajax",!1}}),d}}),c.sedShortcode=new c.SiteEditorShortcode}(sedApp,jQuery),function(a,b){var c=sedApp.editor,d=[],e=[];c.currentAjax=c.currentAjax||{},c.Ajax=c.Class.extend({initialize:function(a,d){if(this.options=b.extend(!0,{type:"POST",url:SEDAJAX.url,dataType:"html",data:{},success:function(){},error:function(){},always:function(){},beforeSend:function(){}},a||{}),this.success=this.options.success,this.error=this.options.error,delete this.options.success,delete this.options.error,this.options.hasOwnProperty("done")&&delete this.options.done,this.options.hasOwnProperty("fail")&&delete this.options.fail,(_.isUndefined(d.container)||_.isString(d.container)&&!d.container||0==d.container.length)&&(d.container="body"),this.container=d.container,_.isUndefined(this.options.loading)){var e,f,g=0==b("#tmpl-sed-ajax-loading").length?"sed-ajax-loading-tpl":"sed-ajax-loading",h=c.template(g);_.isUndefined(this.options.loadingType)?e={type:""}:(e={type:this.options.loadingType},delete this.options.loadingType),f=h(e),this.loading=b(f).appendTo(b(this.container))}else this.loading=this.options.loading,delete this.options.loading;this.errorElm=b(".sed-ajax-error",this.container),this.successElm=b(".sed-ajax-success",this.container),this.overlayElm=b(".sed-ajax-overlay",this.container),b.extend(this,d),this.render()},render:function(){var a,c=b.extend(this.options.data,{url:this.options.url}),f=JSON.stringify(c),g=!1,h=this;b.each(e,function(b,c){if(f===c)return g=!0,a=b,!1}),g!==!0||!_.isUndefined(this.repeatRequest)&&this.repeatRequest?(this.loading.show(),this.overlayElm.show(),this.request=b.ajax(this.options),this.request.done(function(){e.push(f),h.requestDone.apply(h,arguments)}),this.request.fail(function(){h.requestFail.apply(h,arguments)})):(this.response=d[a],this.response.success===!0?this.success():this.error())},requestDone:function(a,e,f){var g=this;return this.loading.hide(),this.overlayElm.hide(),"0"==a?c.hasOwnProperty("previewer")?(c.previewer.preview.iframe.hide(),void c.previewer.login().done(function(){g.render(),c.previewer.preview.iframe.show()})):(c.currentAjax=g,void c.preview.send("check_user_logged_out")):"-1"==a?c.hasOwnProperty("previewer")?void c.previewer.cheatin():void c.preview.send("check_cheaters"):"-2"==a?(g.errorElm.show(),void g.errorElm.html(c.I18n.invalid_data)):(g.errorElm.hide(),g.response=b.parseJSON(a),d.push(g.response),void(g.response.success===!0?g.success():g.error()))},requestFail:function(a,d,e){var f=this;this.loading.hide(),this.overlayElm.hide();var g="<p>"+c.I18n.please+'<a href="#" class="sed-ajax-try-again"><b>'+c.I18n.try_again+"</b></a></p>";0===a.textStatus?f.errorElm.html(c.I18n.disconnect):404==a.textStatus?f.errorElm.html(c.I18n.not_found):500==a.textStatus?f.errorElm.html(c.I18n.internal_error):"parsererror"===e?f.errorElm.html(c.I18n.parser_error):"timeout"===e?f.errorElm.html(c.I18n.timeout):"abort"===e?f.errorElm.html(c.I18n.abort):f.errorElm.html(c.I18n.uncaught+a.responseText);var h=b(g).appendTo(f.errorElm);h.on("click",function(){f.tryAgain()})},tryAgain:function(){this.render()}})}(sedApp,jQuery),function(a,b){var c=sedApp.editor,d=0;c.loadingScripts=[],c.loadingStyles=[],c.ModulesScriptsLoader=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready()},ready:function(){},_checkLoadedScript:function(a,d,e){if(b.isArray(a)){var f;f="js"==e?c.loadingScripts:c.loadingStyles,a=b.grep(a,function(a,c){return!(b.inArray(a[0],d)!=-1||b.inArray(a[0],f)!=-1||!a[0]||!a[1])})}return a},moduleScStLoad:function(a,d,e,f){f=f||"js";var g=this,h={},i=[];if(b.isArray(a)&&0!=a.length&&(a=g._checkLoadedScript(a,d,f),0!=a.length)){var j=function(a){if(b.isArray(a)){var c=[];b.each(a,function(a,d){b.inArray(d[0],c)==-1&&c.push(d[0])}),b.each(a,function(a,e){if(b.isArray(e[2])&&e[2].length>0){e[2]=b.grep(e[2],function(a,e){return(b.inArray(a,d)!=-1||b.inArray(a,c)!=-1)&&b.inArray(a,d)==-1})}})}return a};if(a=j(a),b.isArray(a)&&0!=a.length){var k=function(a){if(b.isArray(a)){var c=[];b.each(a,function(a,d){b.inArray(d[0],c)==-1&&c.push(d[0]);var e=c.indexOf(d[0]);b.isArray(d[2])&&d[2].length>0&&b.each(d[2],function(a,d){b.inArray(d,c)==-1&&(c.splice(e,0,d),e+=1)})})}return c};i=k(a),b.each(i,function(a,b){"js"==f?c.loadingScripts.push(b):c.loadingStyles.push(b),h[b]=0});var l=!1,m=function(){l===!1&&(c.Events.trigger("moduleLoadComplate"),e&&e(),l=!0)},n=0;g._loadQueue=function(){var c=!1,d=0;return b.each(h,function(a,b){if(d+=b,0==b)return c=!0,!1}),0==c&&d==2*h.length?(m(),void alert("complete")):void(0!=c&&b.each(i,function(c,d){for(var e,j=0;j<a.length;j++)if(a[j][0]==d){e=a[j];break}if(0==h[d])if(0!=c&&b.isArray(e[2])&&0!=e[2].length){var k=0;b.each(e[2],function(a,b){k+=h[b]}),k==2*e[2].length&&(h[d]=1,g.loadScript(e[1],function(){h[d]=2,g.loadDown(d,f),g._loadQueue(),n++,n==i.length&&m()},f,e[4]))}else h[d]=1,g.loadScript(e[1],function(){h[d]=2,g.loadDown(d,f),g._loadQueue(),n++,n==i.length&&m()},f,e[4])}))},g._loadQueue()}}},loadDown:function(a,d){if("js"==d){var e=b.inArray(a,c.loadingScripts);e>-1&&c.loadingScripts.splice(e,0)}else{var e=b.inArray(a,c.loadingStyles);e>-1&&c.loadingStyles.splice(e,0)}},loadScript:function(a,b,c,e){function f(){h&&(h.onreadystatechange=h.onload=h=null),"function"==typeof b&&b()}function g(){}var h,i;c=c||"js",i="sed_app_modules_scripts_"+c+d,d++,h="js"==c?document.createElement("script"):document.createElement("link"),h.id=i,h.type="js"==c?"text/javascript":"text/css","js"==c?h.src=a:(h.href=a,h.rel="stylesheet",h.media=e||"all"),"onreadystatechange"in h?h.onreadystatechange=function(){/loaded|complete/.test(h.readyState)&&f()}:h.onload=f,h.onerror=g,!e&&"js"==c||"css"==c?(document.getElementsByTagName("head")[0]||document.body).appendChild(h):document.body.appendChild(h)}})}(sedApp,jQuery),window.sedApp=window.sedApp||{},function(a,b){function c(){}c.prototype={init:function(){},hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null},componentToHex:function(a){var b=a.toString(16);return 1==b.length?"0"+b:b},rgbToHex:function(a){var b=this;a=a.replace("rgb(",""),a=a.replace(")",""),a=a.split(",");var c=parseInt(a[0]),d=parseInt(a[1]),e=parseInt(a[2]);return"#"+b.componentToHex(c)+b.componentToHex(d)+b.componentToHex(e)},addOpacityToRGB:function(a,b){return a=a.replace("rgb(",""),a=a.replace(")",""),a="rgba("+a+","+b+")"},gradient:function(a,b,c,d){var e=this;if(c.type)var f=c.type;else var f="linear";if(startHexColor=e.rgbToHex(a),endHexColor=e.rgbToHex(b),c.opacity){var g=c.opacity;g=g.split(","),a=e.addOpacityToRGB(a,g[0]),b=e.addOpacityToRGB(b,g[1])}else var g="";if(c.percent)var h=c.percent;else var h="0,100";switch(h=h.split(","),h[0]=h[0]+"%",h[1]=h[1]+"%",c.orientation){case"horizontal":var i="left",j="left top, right top",k="to right",l=1;break;case"vertical":var i="top",j="left top, right bottom",k="to bottom",l=0;break;case"diagonal-rb":var i="-45deg",j="left top, left bottom",k="135deg",l=1;break;case"diagonal-rt":var i="45deg",j="left bottom, right top",k="45deg",l=1;break;case"radial":var i="center, ellipse cover",j="center center, 0px, center center, 100%",k="ellipse at center",l=1;break;default:var i="top",j="left top, right bottom",k="to bottom",l=1}var m="-moz-"+f+"-gradient("+i+" , "+a+" "+h[0]+" , "+b+" "+h[1]+") !important; /* FF3.6+ */",n="-webkit-gradient("+f+" , "+j+" , color-stop("+h[0]+","+a+"),  color-stop("+h[1]+","+b+") ) !important; /* Chrome,Safari4+ */",o="-webkit-"+f+"-gradient("+i+" , "+a+" "+h[0]+" , "+b+" "+h[1]+") !important; /* Chrome10+,Safari5.1+ */",p="-o-"+f+"-gradient("+i+" , "+a+" "+h[0]+" , "+b+" "+h[1]+") !important; /* Opera 12+ */",q="-ms-"+f+"-gradient("+i+" , "+a+" "+h[0]+" , "+b+" "+h[1]+") !important; /* IE10+ */",r=f+"-gradient("+k+" , "+a+" "+h[0]+" , "+b+" "+h[1]+") !important; /* W3C */",s="progid:DXImageTransform.Microsoft.gradient( startColorstr='"+startHexColor+"', endColorstr='"+endHexColor+"',GradientType="+l+" ) !important; /* IE6-8 fallback on horizontal gradient */";d=d?'url("'+d+'") , ':"";var t="background: "+a+" "+d+" !important; /* Old browsers */background:"+d+m+"background:"+d+n+"background:"+d+o+"background:"+d+p+"background:"+d+q+"background:"+d+r+"-pie-background:"+d+r+"filter:"+s;return"firefox"==jQuery.browser.name&&(jQuery.browser.versionNumber<3||3==jQuery.browser.versionNumber&&jQuery.browser.versionX<6)&&alert(siteEditor.I18n.GRADIENT_FIREFOX_NOT_SUPPORT),"safari"==jQuery.browser.name&&jQuery.browser.versionNumber<4&&alert(siteEditor.I18n.GRADIENT_SAFARI_NOT_SUPPORT),"opera"==jQuery.browser.name&&jQuery.browser.versionNumber<12&&alert(siteEditor.I18n.GRADIENT_OPERA_NOT_SUPPORT),"msie"==jQuery.browser.name&&(9==jQuery.browser.versionNumber||jQuery.browser.versionNumber<6)&&alert(siteEditor.I18n.GRADIENT_MSIE_NOT_SUPPORT),t},gradientEndColor:function(a){var b=0;if(a.r<=200?b+=1:b-=1,a.g<=200?b+=1:b-=1,a.b<=200?b+=1:b-=1,b<0)var c=-55;else var c=55;var d=a.r>200&&b>0?255:a.r+c,e=a.g>200&&b>0?255:a.g+c,f=a.b>200&&b>0?255:a.b+c,g="rgb("+d+","+e+","+f+")";return g},setGradient:function(a,b,c){var d=this,e=tinycolor(a),f=d.gradientEndColor(e.toRgb()),g=e.toHexString();g=d.hexToRgb(g),g="rgb("+g.r+","+g.g+","+g.b+")";var h=d.gradient(g,f,b,c);return h},backgroundSize:function(a){if(Modernizr.backgroundsize)var b="-moz-background-size:"+a+" !important;",c="-o-background-size:"+a+" !important;",d="-webkit-background-size:"+a+" !important;",e="background-size:"+a+" !important;",f=b+c+d+e;else{"firefox"==jQuery.browser.name&&(jQuery.browser.versionNumber<3||3==jQuery.browser.versionNumber&&jQuery.browser.versionX<6)&&alert(siteEditor.I18n.BGSIZE_FIREFOX_NOT_SUPPORT),"safari"==jQuery.browser.name&&jQuery.browser.versionNumber<3&&alert(siteEditor.I18n.BGSIZE_SAFARI_NOT_SUPPORT),"opera"==jQuery.browser.name&&(jQuery.browser.versionNumber<9||9==jQuery.browser.versionNumber&&jQuery.browser.versionX<5)&&alert(siteEditor.I18n.BGSIZE_OPERA_NOT_SUPPORT),"msie"==jQuery.browser.name&&jQuery.browser.versionNumber<9&&alert(siteEditor.I18n.BGSIZE_MSIE_NOT_SUPPORT),"chrome"==jQuery.browser.name&&jQuery.browser.versionNumber<1&&alert(siteEditor.I18n.BGSIZE_MSIE_NOT_SUPPORT);var f=""}return f},backgroundColor:function(a){},transparency:function(a){opacity2=a/100;var b="zoom: 1 !important;-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity="+a+") !important;filter: alpha(opacity="+a+") !important;-moz-opacity: "+opacity2+" !important;-khtml-opacity: "+opacity2+" !important;opacity: "+opacity2+" !important;";return b},boxShadow:function(a){var b;"string"==typeof a?b=a:"object"==typeof a&&(a=jQuery.extend({HShadow:"1px",VShadow:"1px",blur:"",spread:"",color:"",inset:""},a),b=a.HShadow+" "+a.VShadow+" ",b+=a.blur?a.blur+" ":"",b+=a.spread?a.spread+" ":"",b+=a.color?a.color+" ":"",b+=a.inset?a.inset:"");var c="-webkit-box-shadow: "+b+" !important;-moz-box-shadow: "+b+" !important;box-shadow: "+b+" !important;behavior: url("+_sedAssetsUrls.base.js+"/PIE/PIE.htc);";return c},borderRadius:function(a){var b="-webkit-border-radius: "+a+" !important;-moz-border-radius: "+a+" !important;border-radius: "+a+" !important;behavior: url("+_sedAssetsUrls.base.js+"/PIE/PIE.htc);";return b},sedBorderRadius:function(a,b,c){var d;switch(b.toLowerCase()){case"tl":d="top-left";break;case"tr":d="top-right";break;case"bl":d="bottom-left";break;case"br":d="bottom-right"}c=_.isUndefined(c)?"px":c;var e="-webkit-border-"+d+"-radius: "+a+c+" !important;-moz-border-"+d+"-radius: "+a+c+" !important;border-"+d+"-radius: "+a+c+" !important;behavior: url("+_sedAssetsUrls.base.js+"/PIE/PIE.htc);";return e}},a.css=c}(sedApp,jQuery),function(a){a.fn.sedColumnResize=function(b){function c(){k.css("position","relative"),h=a('<div class="sed-resizable-handle sed-resizable-w" style="z-index: 90;"><div class="sed-column-resize-helper"></div></div>').appendTo(k),h.css("position","absolute")}function d(){var c=k.parent().width(),d=(k.parent().children("."+b.column).length,0);k.parent().children("."+b.column).each(function(b){d+=a(this)[0]!==k[0]&&a(this)[0]!==k.prev()[0]?a(this).outerWidth(!0):a(this).outerWidth(!0)-a(this).width()}),j=c-d-b.minWidth}function e(a){return parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))}function f(a){return parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))}function g(a){return parseInt(a.css("margin-left"))+parseInt(a.css("margin-right"))}var h,i,j,b=a.extend({cursor:"w-resize",minWidth:10,column:"sed-column-pb",unit:"px",isRtl:!1,resizeStart:function(){},resize:function(){},stop:function(){}},b),k=a(this);return c(),h.css("cursor",b.cursor).on("mousedown",function(c){i=a(this);var h,k=i.offset().left-c.pageX,l=(i.offset().top,i.css("z-index"),i.offset().left),m=i.parent().width(),n=!1,o=i.parent().parent().width(),p=e(i.parent()),q=f(i.parent());g(i.parent());d(),a(document.documentElement).on("mousemove.sedColumnResize",function(a){n===!1&&(b.resizeStart(a,i.parent()),n=!0),i.css({"z-index":999,cursor:b.cursor,bottom:"auto",right:"auto"}),h=k+a.pageX-l,b.isRtl===!0?m+h>=b.minWidth&&m+h<=j&&("%"==b.unit?i.parent().css("width",(m+h+p+q)/o*100+"%"):i.parent().width(m+h+p+q),b.resize(a,h,i.parent(),j,b)):m-h>=b.minWidth&&m-h<=j&&("%"==b.unit?i.parent().css("width",(m-h+p+q)/o*100+"%"):i.parent().width(m-h+p+q),b.resize(a,h,i.parent(),j,b))}).one("mouseup",function(c){b.stop(c,i.parent()),a(this).off("mousemove.sedColumnResize")}),c.preventDefault()}),this}}(jQuery),function(a,b){var c,d=sedApp.editor;c=function(a,b,c){var d;return function(){var e=arguments;c=c||this,clearTimeout(d),d=setTimeout(function(){d=null,a.apply(c,e)},b)}},d.Preview=d.Messenger.extend({initialize:function(a,e){var f=this;d.Messenger.prototype.initialize.call(this,a,e),this.body=b(document.body),this.body.on("click.preview","a",function(a){var c,d;c=b(this),d="#"===c.attr("href").substr(0,1),a.preventDefault(),d&&"#"!==c.attr("href")&&b(c.attr("href")).each(function(){this.scrollIntoView()}),a.shiftKey||d||(f.send("scroll",0),f.send("url",c.prop("href")))}),this.body.on("submit.preview","form",function(a){a.preventDefault()}),this.window=b(window),this.window.on("scroll.preview",c(function(){f.send("scroll",f.window.scrollTop())},200)),this.bind("scroll",function(a){f.window.scrollTop(a)})}}),d.template=_.memoize(function(a){var c,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(e){return(c=c||_.template(b("#"+a).html(),null,d))(e)}}),d.wpAjax={post:function(a,b){return d.wpAjax.send({data:_.isObject(a)?a:_.extend(b||{},{action:a})})},send:function(a,c){var d,e;return _.isObject(a)?c=a:(c=c||{},c.data=_.extend(c.data||{},{action:a})),c=_.defaults(c||{},{type:"POST",url:SEDAJAX.url,context:this}),e=b.Deferred(function(a){c.success&&a.done(c.success),c.error&&a.fail(c.error),delete c.success,delete c.error,a.jqXHR=b.ajax(c).done(function(b){"1"!==b&&1!==b||(b={success:!0}),_.isObject(b)&&!_.isUndefined(b.success)?a[b.success?"resolveWith":"rejectWith"](this,[b.data]):a.rejectWith(this,[b])}).fail(function(){a.rejectWith(this,arguments)})}),d=e.promise(),d.abort=function(){return e.jqXHR.abort(),this},d}}}(sedApp,jQuery),function(exports,$){var api=sedApp.editor,siteEditorCss=new sedApp.css,styleIdElements={},rowTmpl={},colTmpl={};api.currentPageCustomCss=api.currentPageCustomCss||{},api.siteCustomCss=api.siteCustomCss||{},api.currentCssSelector="",api.currentCssSettingType="",api.currentAttr="";var _saveCustomCss=function(a,b){if(!_.isUndefined(api.currentCssSelector)&&api.currentCssSelector&&!_.isUndefined(api.currentCssSettingType)&&api.currentCssSettingType){var c={};switch(api.currentCssSettingType){case"module":if(_.isUndefined(api.currentSedElementId)||!api.currentSedElementId)return;var d=api.currentSedElementId,e=api.contentBuilder.getAttrs(d);c=_.isUndefined(e)||_.isUndefined(e.sed_css)||!_.isObject(e.sed_css)?{}:e.sed_css,_.isUndefined(c[api.currentCssSelector])&&(c[api.currentCssSelector]={}),c[api.currentCssSelector][a]=b,api.contentBuilder.updateShortcodeAttr("sed_css",c,d);break;case"page":c=api.currentPageCustomCss,_.isUndefined(c[api.currentCssSelector])&&(c[api.currentCssSelector]={}),c[api.currentCssSelector][a]=b,api.preview.send("page_custom_design_settings",c);break;case"site":c=api.siteCustomCss,_.isUndefined(c[api.currentCssSelector])&&(c[api.currentCssSelector]={}),c[api.currentCssSelector][a]=b,api.preview.send("site_custom_design_settings",c)}}};$(function(){if(api.isRTL=window.IS_RTL,api.settings=window._sedAppEditorSettings,api.I18n=window._sedAppEditorI18n,api.addOnSettings=window._sedAppEditorAddOnSettings,api.settings){var bg,parallax,font,bgElements,textProp,stylesProp,radius,paddings,margins,borders,columnRowWidth=$('[sed-role="main-content"] > .columns-row-inner').width();api.preview=new api.Preview({url:window.location.href,channel:api.settings.channel}),$('<style type="text/css" id="sed_site_css_editor_generate"></style>').appendTo($("head")),$('<style type="text/css" id="sed_page_css_editor_generate"></style>').appendTo($("head")),$('<style type="text/css" id="sed_custom_css_editor_generate"></style>').appendTo($("head")),$('<style type="text/css" id="sed_color_scheme_css_code"></style>').appendTo($("head")),$('<style type="text/css" id="sed_site_custom_css_code"></style>').appendTo($("head")),$('<style type="text/css" id="sed_page_custom_css_code"></style>').appendTo($("head"));var setValue=function(a,b,c){var d=api(a);d?d.set(b):(c=c||!1,d=api.create(a,b,{id:a,stype:api.settings.types[a]||"general"}),c&&(d._dirty=!0))};api.preview.bind("settings",function(a){$.each(a,setValue)}),console.log("--------------api.settings.values----------------",api.settings.values),api.preview.trigger("settings",api.settings.values),$.each(api.settings._dirty,function(a,b){var c=api(b);c&&(c._dirty=!0)}),api.preview.bind("setting",function(a){var b=!0;setValue.apply(null,a.concat(b))}),api.preview.bind("loading-initiated",function(){}),api.preview.bind("loading-failed",function(){}),api.preview.bind("current_element",function(a){api.currentSedElementId=a}),api.preview.bind("current_css_setting_type",function(a){api.currentCssSettingType=a}),api.preview.bind("current_css_selector",function(a){api.currentCssSelector=a}),api.preview.bind("sync",function(a){$.each(a,function(a,b){api.preview.trigger(a,b)}),api.preview.send("synced")}),api.preview.bind("active",function(){api.Events.trigger("startActivePreview"),api.settings.nonce&&api.preview.send("nonce",api.settings.nonce),api.preview.send("currentPostId",api.settings.post.id),api.preview.send("contextmenu-ready"),api.preview.send("syncPreLoadSettings",api.settings.preLoadSettings)}),api.preview.bind("saved",function(a){api.trigger("saved",a)}),api.bind("saved",function(){api.each(function(a){a._dirty=!1})}),api.preview.bind("nonce-refresh",function(a){$.extend(api.settings.nonce,a)}),api.preview.send("ready"),api.preview.bind("user_login_done",function(){api.currentAjax&&api.currentAjax.render()}),api.sedCustomStyle={},api.sedCustomStyleString={customCssString:""},api.sedPageCustomStyle={},api.sedPageCustomStyleString={customCssString:""},api.sedSiteCustomStyle={},api.sedSiteCustomStyleString={customCssString:""},api.preview.bind("sedCustomStyleUpdate",function(a){if(!(_.isUndefined(a)||_.isUndefined(a.css)||_.isUndefined(a.setting))&&api.currentCssSelector){var b=a.css,c=a.setting,d=a.value,e=a.save,f={};switch(api.currentCssSettingType){case"module":var g=api.sedCustomStyle;f=api.sedCustomStyleString;break;case"page":var g=api.sedPageCustomStyle;f=api.sedPageCustomStyleString;break;case"site":var g=api.sedSiteCustomStyle;f=api.sedSiteCustomStyleString}switch(_.isUndefined(g[api.currentCssSelector])||_.isUndefined(g[api.currentCssSelector][c])?(_.isUndefined(g[api.currentCssSelector])&&(g[api.currentCssSelector]={}),g[api.currentCssSelector][c]=b,f.customCssString+=b):(f.customCssString=f.customCssString.replace(g[api.currentCssSelector][c],b),g[api.currentCssSelector][c]=b),e===!0&&_saveCustomCss(c,d),api.currentCssSettingType){case"page":$("#sed_page_css_editor_generate").html(f.customCssString);break;case"site":$("#sed_site_css_editor_generate").html(f.customCssString);break;default:$("#sed_custom_css_editor_generate").html(f.customCssString)}}});var _styleSettingsMap={padding_top:"padding-top",padding_right:"padding-right",padding_left:"padding-left",padding_bottom:"padding-bottom",
margin_top:"margin-top",margin_right:"margin-right",margin_left:"margin-left",margin_bottom:"margin-bottom",trancparency:"opacity",border_top_color:"border-top-color",border_top_width:"border-top-width",border_top_style:"border-top-style",border_left_color:"border-left-color",border_left_width:"border-left-width",border_left_style:"border-left-style",border_bottom_color:"border-bottom-color",border_bottom_width:"border-bottom-width",border_bottom_style:"border-bottom-style",border_right_color:"border-right-color",border_right_width:"border-right-width",border_right_style:"border-right-style",border_radius_tr:"border-top-right-radius",border_radius_tl:"border-top-left-radius",border_radius_br:"border-bottom-right-radius",border_radius_bl:"border-bottom-left-radius",font_family:"font-family",font_size:"font-size",font_weight:"font-weight",font_style:"font-style",text_decoration:"text-decoration",text_align:"text-align",font_color:"color",line_height:"line-height",position:"position",shadow_color:"box-shadow",shadow:"box-shadow",text_shadow_color:"text-shadow",text_shadow:"text-shadow",parallax_background_image:"",parallax_background_ratio:"",background_attachment:"background-attachment",background_color:"background-color",background_position:"background-position",background_image:"background-image",external_background_image:"background-image",background_gradient:"background-image",background_repeat:"background-repeat",background_size:"background-size",padding_lock:"",margin_lock:"",border_radius_lock:"",border_style_lock:"",border_color_lock:"",border_width_lock:"",spacing_lock:""};_.each(_styleSettingsMap,function(a,b){api(b,function(c){c.bind(function(c){if(api.currentCssSelector){var d=_getCurrentSedCss(),e=!0,f=b;switch(b){case"trancparency":var g=c||0==c?c:"initial",h=api.currentCssSelector+"{"+siteEditorCss.transparency(g)+"}";break;case"border_radius_tr":var g=c?c:"initial",h=api.currentCssSelector+"{"+siteEditorCss.sedBorderRadius(g,"tr")+"}";break;case"border_radius_tl":var g=c?c:"initial",h=api.currentCssSelector+"{"+siteEditorCss.sedBorderRadius(g,"tl")+"}";break;case"border_radius_br":var g=c?c:"initial",h=api.currentCssSelector+"{"+siteEditorCss.sedBorderRadius(g,"br")+"}";break;case"border_radius_bl":var g=c?c:"initial",h=api.currentCssSelector+"{"+siteEditorCss.sedBorderRadius(g,"bl")+"}";break;case"border_top_color":case"border_top_style":case"border_right_color":case"border_right_style":case"border_left_color":case"border_left_style":case"border_bottom_color":case"border_bottom_style":case"font_weight":case"font_style":case"text_decoration":case"text_align":case"font_color":case"position":case"background_attachment":var g=c?c+" !important":"initial",h=api.currentCssSelector+"{"+a+" : "+g+";}";break;case"background_position":if(_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].parallax_background_image))var g=c?c+" !important":"initial",h=api.currentCssSelector+"{"+a+" : "+g+";}";else{var i=d[api.currentCssSelector].parallax_background_image;if(!i)var g=c?c+" !important":"initial",h=api.currentCssSelector+"{"+a+" : "+g+";}"}break;case"border_top_width":case"border_right_width":case"border_bottom_width":case"border_left_width":case"padding_top":case"padding_right":case"padding_bottom":case"padding_left":case"margin_top":case"margin_right":case"margin_bottom":case"margin_left":case"font_size":case"line_height":var g=c||0==c?c+"px !important":"initial",h=api.currentCssSelector+"{"+a+" : "+g+";}";break;case"font_family":api.typography.loadFont(c);var g=c?c+" !important":"initial",h=api.currentCssSelector+"{"+a+" : "+g+";}";break;case"shadow":var j=_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].shadow_color)?"#000000":d[api.currentCssSelector].shadow_color,k=c,h=api.currentCssSelector+"{"+_getShadow(k,j)+"}";break;case"shadow_color":if(_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].shadow))return void _saveCustomCss(b,c);var j=c;_saveCustomCss(b,c);var k=d[api.currentCssSelector].shadow,h=api.currentCssSelector+"{"+_getShadow(k,j)+"}";f="shadow",e=!1;break;case"text_shadow":var j=_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].text_shadow_color)?"#000000":d[api.currentCssSelector].text_shadow_color,k=c,h=api.currentCssSelector+"{text-shadow: "+k+" "+j+" !important;}";break;case"text_shadow_color":if(_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].text_shadow))return void _saveCustomCss(b,c);var j=c;_saveCustomCss(b,c);var k=d[api.currentCssSelector].text_shadow,h=api.currentCssSelector+"{text-shadow: "+k+" "+j+" !important;}";f="text_shadow",e=!1;break;case"parallax_background_image":var l=_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].parallax_background_ratio)?.5:d[api.currentCssSelector].parallax_background_ratio;if(_setParallax(c,l),c||_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].background_position)){_saveCustomCss(b,c),f="background_position",e=!1;var h=""}else{var g=d[api.currentCssSelector].background_position?d[api.currentCssSelector].background_position+" !important":"initial",h=api.currentCssSelector+"{background-position : "+g+";}";f="background_position",e=!1,_saveCustomCss(b,c)}break;case"parallax_background_ratio":if(_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].parallax_background_image))return void _saveCustomCss(b,c);var l=c,i=d[api.currentCssSelector].parallax_background_image;if(_setParallax(i,c),i||_.isUndefined(d[api.currentCssSelector])||_.isUndefined(d[api.currentCssSelector].background_position)){_saveCustomCss(b,c),f="background_position",e=!1;var h=""}else{var g=d[api.currentCssSelector].background_position?d[api.currentCssSelector].background_position+" !important":"initial",h=api.currentCssSelector+"{background-position : "+g+";}";f="background_position",e=!1,_saveCustomCss(b,c)}return void _saveCustomCss(b,c);case"background_size":var h=api.currentCssSelector+"{"+siteEditorCss.backgroundSize(c)+"}";break;case"background_repeat":var h=api.currentCssSelector+"{background-repeat: "+c+" !important;}";break;case"background_image":case"external_background_image":_saveCustomCss(b,c);var m=!_.isUndefined(d[api.currentCssSelector])&&!_.isUndefined(d[api.currentCssSelector].background_gradient)&&!_.isEmpty(d[api.currentCssSelector].background_gradient)&&_.isObject(d[api.currentCssSelector].background_gradient),n=_getBackgroundImage(),o=n&&"none"!=n,h=api.currentCssSelector+"{"+_getCssBackgroundImage(n,o,m)+"}";f="background_image",e=!1;break;case"background_gradient":var m=!_.isEmpty(c)&&c&&_.isObject(c),n=_getBackgroundImage(),o=n&&"none"!=n,p=m?_.clone(_getGradient(c)):c;_saveCustomCss(b,p);var h=api.currentCssSelector+"{"+_getCssBackgroundImage(n,o,m)+"}";f="background_image",e=!1;break;case"background_color":_saveCustomCss(b,c);var m=!_.isUndefined(d[api.currentCssSelector])&&!_.isUndefined(d[api.currentCssSelector].background_gradient)&&!_.isEmpty(d[api.currentCssSelector].background_gradient)&&_.isObject(d[api.currentCssSelector].background_gradient),n=_getBackgroundImage(),o=n&&"none"!=n;h=api.currentCssSelector+"{"+_getCssBackgroundImage(n,o,m)+"}",f="background_image",e=!1;break;case"padding_lock":case"margin_lock":case"spacing_lock":case"border_radius_lock":case"border_style_lock":case"border_color_lock":case"border_width_lock":return void _saveCustomCss(b,c)}api.preview.trigger("sedCustomStyleUpdate",{css:h,setting:f,value:c,save:e})}})})});var _getCurrentSedCss=function(){var a={};switch(api.currentCssSettingType){case"module":var b=api.currentSedElementId,c=api.contentBuilder.getAttrs(b);a=_.isUndefined(c)||_.isUndefined(c.sed_css)||!_.isObject(c.sed_css)?{}:c.sed_css;break;case"page":a=api.currentPageCustomCss;break;case"site":a=api.siteCustomCss}return a},_getShadow=function(a,b){a&&"none"!=a?a.indexOf("inset")>-1?(a=a.replace("inset",""),a=$.trim(a),a+=" "+b,a+=" inset"):a+=" "+b:a="none";var c=siteEditorCss.boxShadow(a);return c},initParallax={},parallaxRatio={},_setParallax=function(a,b,c){if(c=!_.isUndefined(c)&&c?c:api.currentCssSelector){if(a){var d=b?b:.5;_.isUndefined(initParallax[c])||initParallax[c]!==!0||$(c).parallax("destroy"),$(c).parallax({xpos:"50%",speedFactor:d}),initParallax[c]=!0}else $(c).parallax("destroy"),initParallax[c]=!1;parallaxRatio[c]=b||.5}},_refreshParallaxElements=function(){$.each(initParallax,function(a,b){b!==!0||_.isUndefined(parallaxRatio[a])||_setParallax(b,parallaxRatio[a],a)})};api.Events.bind("changePreviewMode",function(a){_refreshParallaxElements()}),api.Events.bind("moduleSortableStopEvent",function(a){_refreshParallaxElements()});var _defaultBgColors={},_getGradient=function(a){var b=_getCurrentSedCss();if(_.isUndefined(a)&&(a=_.isUndefined(b[api.currentCssSelector])||_.isUndefined(b[api.currentCssSelector].background_gradient)?"":b[api.currentCssSelector].background_gradient),!_.isEmpty(a)&&_.isObject(a)){var c;_.isUndefined(b[api.currentCssSelector])||_.isUndefined(b[api.currentCssSelector].background_color)?_.isUndefined(_defaultBgColors[api.currentCssSelector])?(c=$(api.currentCssSelector).css("background-color"),_defaultBgColors[api.currentCssSelector]=c):c=_defaultBgColors[api.currentCssSelector]:c=b[api.currentCssSelector].background_color,c=c||"#000000";var d=tinycolor(c),e=siteEditorCss.gradientEndColor(d.toRgb()),f=d.toHexString();f=siteEditorCss.hexToRgb(f),f="rgb("+f.r+","+f.g+","+f.b+")",a.start=f,a.end=e}return a},_getCssBackgroundImage=function(a,b,c){if(b||c)if(!b&&c)var d=_getGradient(),e=siteEditorCss.gradient(d.start,d.end,d);else if(b&&c)var d=_getGradient(),e=siteEditorCss.gradient(d.start,d.end,d,a);else var e='background-image: url("'+a+'") !important;';else var e="background-image: none !important;";var f=_getCurrentSedCss(),g=_.isUndefined(f[api.currentCssSelector])||_.isUndefined(f[api.currentCssSelector].background_color)?"":f[api.currentCssSelector].background_color;return!c&&g&&(e+="background-color: "+g+" !important;"),e},_getBackgroundImage=function(){var a=_getCurrentSedCss(),b=_.isUndefined(a[api.currentCssSelector])||_.isUndefined(a[api.currentCssSelector].background_image)?"":a[api.currentCssSelector].background_image;return b&&"none"!=b||(b=_.isUndefined(a[api.currentCssSelector])||_.isUndefined(a[api.currentCssSelector].external_background_image)?"":a[api.currentCssSelector].external_background_image),b};api.trigger("preview-ready");var _filterFloat=function(a){return!!/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(a)&&Number(a)},_previewAutoUpdate=function(to,previewArgs,previewType,settingId){switch(to=_filterFloat(to)===!1?to:_filterFloat(to),previewType){case"text":var $element=$(previewArgs.selector);$element.text(to);break;case"html":var $element=$(previewArgs.selector);$element.html(to);break;case"carousel":var $element=$(previewArgs.selector),attr=previewArgs.option;$element.data(attr,to),$element.trigger("sedChangeDataCarousel");break;case"inline-css":var cssTemplate=previewArgs.style,templateId=settingId+"_css_tpl",styleId=settingId+"_style",template,css="";if(0==$("#"+templateId).length){var script='<script id="'+templateId+'" type="text/html">'+cssTemplate+"</script>";$(script).appendTo($("body"))}template=api.template(templateId),$("#"+styleId).remove(),css=template({to:to});var style='<style id="'+styleId+'">'+css+"</style>";$(style).appendTo($("head"));break;case"toggle-class":var $element=$(previewArgs.selector),cssClass=previewArgs["class"];$element.toggleClass(cssClass,to);break;case"woo-loop-columns":var $container=$(previewArgs.selector),type=api(previewArgs.settingTypeId)();if("grid"==type||"default"==type){$.each([2,3,4,5,6],function(a,b){b=parseInt(12/b),$container.find(".product").hasClass("col-sm-"+b)&&$container.find(".product").removeClass("col-sm-"+b)}),to=parseInt(to),to>6?to=6:to<2&&(to=2);var col=parseInt(12/to),column_class="col-sm-"+col;$container.find(".product").addClass(column_class)}if("default"==type){$container.hasClass("reset-clr")||$container.addClass("reset-clr");var styleId=settingId+"_col_style";$("#"+styleId).remove();var css="#content .woocommerce-module.woocommerce-up-sells-module .sedf-products-default > .product:nth-of-type("+to+"n+1){clear: both !important;}",style='<style id="'+styleId+'">'+css+"</style>";$(style).appendTo($("head"))}else"grid"==type&&$container.masonry();break;case"toggle":var $element=$(previewArgs.selector);to?$element.removeClass("hide"):$element.addClass("hide");break;case"add-class":break;case"sed-animation":break;case"media":}_.isUndefined(previewArgs.callback)||eval(previewArgs.callback)};api.preview.bind("addDynamicPreviewParams",function(a){$.each(a,function(a,b){if(_.isUndefined(b.settingId)||_.isUndefined(b.type))return!0;var c=b.settingId,d=b.type;"sed_pb_modules"!=c?api(c,function(a){a.bind(function(a){_previewAutoUpdate(a,b,d,c)})}):_.isUndefined(b.shortcode)||_.isUndefined(b.attr)||(_.isUndefined(api.shortcodeAutoUpdate[b.shortcode])&&(api.shortcodeAutoUpdate[b.shortcode]={}),api.shortcodeAutoUpdate[b.shortcode][b.attr]=function(a,c){var e=b.shortcode+"_"+b.attr;_.isUndefined(b.selector)||(b.selector=b.selector.replace("##current##",'[sed_model_id="'+a+'"]')),_previewAutoUpdate(c,b,d,e)})})})}})}(sedApp,jQuery),sedApp.editor.selectiveRefresh=function(a,b){"use strict";var c,d,e;return c={ready:a.Deferred(),data:{partials:{},renderQueryVar:"",l10n:{shiftClickToEdit:""},refreshBuffer:250},currentRequest:null},_.extend(c,b.Events),d=c.Partial=b.Class.extend({id:null,initialize:function(b,c){var d=this;c=c||{},d.id=b,d.params=_.extend({selector:null,settings:[],primarySetting:null,containerInclusive:!1,fallbackRefresh:!0},c.params||{}),d.deferred={},d.deferred.ready=a.Deferred(),d.deferred.ready.done(function(){d.ready()})},ready:function(){var b=this;_.each(_.pluck(b.placements(),"container"),function(b){a(b).attr("title",c.data.l10n.shiftClickToEdit)})},placements:function(){var b,c=this;return b=c.params.selector||"",b&&(b+=", "),b+='[data-customize-partial-id="'+c.id+'"]',a(b).map(function(){var b,d=a(this);if(b=d.data("customize-partial-placement-context"),_.isString(b)&&"{"===b.substr(0,1))throw new Error("context JSON parse error");return new e({partial:c,container:d,context:b})}).get()},settings:function(){var a=this;return a.params.settings&&0!==a.params.settings.length?a.params.settings:a.params.primarySetting?[a.params.primarySetting]:[a.id]},isRelatedSetting:function(a){var c=this;return _.isString(a)&&(a=b(a)),!!a&&-1!==_.indexOf(c.settings(),a.id)},preparePlacement:function(b){a(b.container).addClass("sed-app-partial-refreshing"),this.addLoading(b),this.loading.show()},addLoading:function(c){var d,e=b.template("sed-ajax-loading-tpl");d=e({type:"medium"}),this.loading=a(d).appendTo(a(c.container))},_pendingRefreshPromise:null,refresh:function(){var a,b=this;return a=c.requestPartial(b),b._pendingRefreshPromise||(_.each(b.placements(),function(a){b.preparePlacement(a)}),a.done(function(a){_.each(a,function(a){b.renderContent(a)})}),a.fail(function(a,c){b.fallback(a,c)}),b._pendingRefreshPromise=a,a.always(function(){b._pendingRefreshPromise=null})),a},renderContent:function(b){var d,e,f=this;if(!b.container)return f.fallback(new Error("no_container"),[b]),!1;if(b.container=a(b.container),!1===b.addedContent)return f.fallback(new Error("missing_render"),[b]),!1;if(!_.isString(b.addedContent))return f.fallback(new Error("non_string_content"),[b]),!1;c.orginalDocumentWrite=document.write,document.write=function(){throw new Error(c.data.l10n.badDocumentWrite)};try{if(d=b.addedContent,wp.emoji&&wp.emoji.parse&&!a.contains(document.head,b.container[0])&&(d=wp.emoji.parse(d)),f.params.containerInclusive)e=a(d),b.context=_.extend(b.context,e.data("customize-partial-placement-context")||{}),e.data("customize-partial-placement-context",b.context),b.removedNodes=b.container,b.container=e,b.removedNodes.replaceWith(b.container),b.container.attr("title",c.data.l10n.shiftClickToEdit);else{for(b.removedNodes=document.createDocumentFragment();b.container[0].firstChild;)b.removedNodes.appendChild(b.container[0].firstChild);b.container.html(d)}b.container.removeClass("customize-render-content-error")}catch(g){"undefined"!=typeof console&&console.error&&console.error(f.id,g)}return document.write=c.orginalDocumentWrite,c.orginalDocumentWrite=null,b.container.removeClass("sed-app-partial-refreshing"),this.loading.hide(),b.container.data("customize-partial-content-rendered",!0),c.trigger("partial-content-rendered",b),!0},fallback:function(){var a=this;a.params.fallbackRefresh&&c.requestFullRefresh()}}),c.Placement=e=b.Class.extend({partial:null,container:null,startNode:null,endNode:null,context:null,addedContent:null,removedNodes:null,initialize:function(b){var c=this;if(b=_.extend({},b||{}),!b.partial||!b.partial.extended(d))throw new Error("Missing partial");b.context=b.context||{},b.container&&(b.container=a(b.container)),_.extend(c,b)}}),c.partialConstructor={},c.partial=new b.Values({defaultConstructor:d}),c.getCustomizeQuery=function(){var a={};return b.each(function(b,c){b._dirty&&(a[c]=b())}),{sed_app_editor:"on",nonce:b.settings.nonce.preview,theme:b.settings.theme.stylesheet,sed_page_customized:JSON.stringify(a)}},c._pendingPartialRequests={},c._debouncedTimeoutId=null,c._currentRequest=null,c.requestFullRefresh=function(){b.preview.send("refresh")},c.requestPartial=function(d){var f;return c._debouncedTimeoutId&&(clearTimeout(c._debouncedTimeoutId),c._debouncedTimeoutId=null),c._currentRequest&&(c._currentRequest.abort(),c._currentRequest=null),f=c._pendingPartialRequests[d.id],f&&"pending"===f.deferred.state()||(f={deferred:a.Deferred(),partial:d},c._pendingPartialRequests[d.id]=f),d=null,c._debouncedTimeoutId=setTimeout(function(){var a,d,f,g;c._debouncedTimeoutId=null,a=c.getCustomizeQuery(),f={},d={},_.each(c._pendingPartialRequests,function(a,b){f[b]=a.partial.placements(),c.partial.has(b)?d[b]=_.map(f[b],function(a){return a.context||{}}):a.deferred.rejectWith(a.partial,[new Error("partial_removed"),f[b]])}),a.partials=JSON.stringify(d),a[c.data.renderQueryVar]="1",g=c._currentRequest=b.wpAjax.send(null,{data:a,url:b.settings.url.self}),g.done(function(a){c.trigger("render-partials-response",a),a.errors&&"undefined"!=typeof console&&console.warn&&_.each(a.errors,function(a){console.warn(a)}),_.each(c._pendingPartialRequests,function(b,c){var d;_.isArray(a.contents[c])?(d=_.map(a.contents[c],function(a,d){var g=f[c][d];return g?g.addedContent=a:g=new e({partial:b.partial,addedContent:a}),g}),b.deferred.resolveWith(b.partial,[d])):b.deferred.rejectWith(b.partial,[new Error("unrecognized_partial"),f[c]])}),c._pendingPartialRequests={}}),g.fail(function(a,b){"abort"!==b&&(_.each(c._pendingPartialRequests,function(b,c){b.deferred.rejectWith(b.partial,[a,f[c]])}),c._pendingPartialRequests={})})},c.data.refreshBuffer),f.deferred.promise()},c.addPartials=function(b,d){var f;b||(b=document.documentElement),b=a(b),d=_.extend({triggerRendered:!0},d||{}),f=b.find("[data-customize-partial-id]"),b.is("[data-customize-partial-id]")&&(f=f.add(b)),f.each(function(){var b,f,g,h,i,j=a(this);f=j.data("customize-partial-id"),f&&(i=j.data("customize-partial-placement-context")||{},b=c.partial(f),b||(h=j.data("customize-partial-options")||{},h.constructingContainerContext=j.data("customize-partial-placement-context")||{},g=c.partialConstructor[j.data("customize-partial-type")]||c.Partial,b=new g(f,h),c.partial.add(b.id,b)),d.triggerRendered&&!j.data("customize-partial-content-rendered")&&c.trigger("partial-content-rendered",new e({partial:b,context:i,container:j})),j.data("customize-partial-content-rendered",!0))})},b.bind("preview-ready",function(){var d,e,f;document.head||(document.head=a("head:first")[0]),_.extend(c.data,window._sedAppPartialRefreshExports),_.each(c.data.partials,function(a,b){var d,e=c.partial(b);e?_.extend(e.params,a):(d=c.partialConstructor[a.type]||c.Partial,e=new d(b,{params:a}),c.partial.add(b,e))}),d=function(a,b){var d=this;c.partial.each(function(c){c.isRelatedSetting(d,a,b)&&c.refresh()})},e=function(a){d.call(a,a(),null),a.bind(d)},f=function(a){d.call(a,null,a()),a.unbind(d)},b.bind("add",e),b.bind("remove",f),b.each(function(a){a.bind(d)}),c.addPartials(document.documentElement,{triggerRendered:!1}),"undefined"!=typeof MutationObserver&&(c.mutationObserver=new MutationObserver(function(b){_.each(b,function(b){c.addPartials(a(b.target))})}),c.mutationObserver.observe(document.documentElement,{childList:!0,subtree:!0})),b.selectiveRefresh.bind("partial-content-rendered",function(a){a.container&&c.addPartials(a.container)}),b.preview.bind("active",function(){c.partial.each(function(a){a.deferred.ready.resolve()}),c.partial.bind("add",function(a){a.deferred.ready.resolve()})}),b.preview.bind("addDynamicPartials",function(a){_.isEmpty(a)||_.each(a,function(a,b){var d,e=c.partial(b);e?_.extend(e.params,a):(d=c.partialConstructor[a.type]||c.Partial,e=new d(b,{params:a}),c.partial.add(b,e))})})}),c}(jQuery,sedApp.editor),function(a,b){var c=sedApp.editor;c.shortcodeCreate=c.shortcodeCreate||{},c.ShortcodeBuilder=c.Class.extend({initialize:function(a,d){var e=this;this.contentModel,this.compiledShortcodes=[],this.loadedSkins=[],b.extend(this,d||{}),b.each(this.postsContent,function(a,c){b.isArray(c)&&b.each(c,function(a,c){b('[sed_model_id="'+c.id+'"]').attr("sed-shortcode","true")})}),c.Events.bind("afterPageInfoReady",function(){e.preview.send("pages_theme_content_ready",{content:e.pagesThemeContent,postType:c.currentPageInfo.post_type}),e.preview.send("posts_content_ready",e.postsContent)})},addShortcodeModule:function(a,c,d,e){var f,g=this;if(this.checkContentType(),this.contentModel[c]=this.contentModel[c]||[],d)if(a=_.map(a,function(a){return a=g.modifyShortcode(a)}),f=this.getShortcodeIndex(d),1==e){var h=this.getShortcode(d),i=this.findAllTreeChildren(d,c),j=f+i.length+1;this.addShortcodesToParent(h.parent_id,a,c,j)}else{var k=b.merge([f,0],a);Array.prototype.splice.apply(this.contentModel[c],k)}else b.each(a,function(a,b){g.contentModel[c].push(g.modifyShortcode(b))});this.sendData()},checkContentType:function(){"theme"==c.shortcodeCurrentPlace?this.contentModel=this.pagesThemeContent:this.contentModel=this.postsContent},addShortcodesToParent:function(a,c,d,e){var f=this;if(this.checkContentType(),!_.isUndefined(e)&&_.isNumber(e)&&e>-1)var g=e;else var h=this.findAllTreeChildren(a,d),i=this.getShortcodeIndex(a),g=h.length+i+1;if(c=_.map(c,function(a){return a=f.modifyShortcode(a)}),g<=f.contentModel[d].length){var j=b.merge([g,0],c);Array.prototype.splice.apply(this.contentModel[d],j)}else this.appendShortcodes(a,c,d);this.sendData()},appendShortcodes:function(a,c,d){var e=this;this.checkContentType(),b.each(c,function(a,b){b=e.modifyShortcode(b),e.contentModel[d].push(b)}),this.sendData()},getContentModel:function(a){return _.isUndefined(a)?a=this.contentModel:(contentModelName=a,"theme"==a?a=this.pagesThemeContent:"post"==a&&(a=this.postsContent)),a},getHelperTreeIds:function(a,c,d){var e=this,f=[],g=this.getContentModel(d);return _.each(g[c],function(g){_.isUndefined(g.attrs)||_.isUndefined(g.attrs.module_helper_id)||g.attrs.module_helper_id!=a||(f.push(g.id),f=b.merge(f,e.findAllTreeChildren(g.id,c,d)||[]))}),f},deleteModule:function(a,c,d,e){this.checkContentType();var f=this.getContentModel(e);b.isArray(d)&&d.length>0?this.deleteModuleTreeChildren(a,c,d,e):this.deleteModuleTreeChildren(a,c,"",e);var g=this.getHelperTreeIds(a,c,e);f[c]=_.filter(f[c],function(a){return b.inArray(a.id,g)==-1}),this.deleteShortcode(a,c,e)},deleteModuleTreeChildren:function(a,c,d,e){var f=this;this.checkContentType();var g=this.getContentModel(e);d=b.isArray(d)?d:f.findAllTreeChildren(a,c,e);for(var h=0;h<d.length;h++)for(var i=0;i<g[c].length;i++){var j=g[c][i];if(j.id==d[h]){g[c].splice(i,1);break}}this.sendData(e)},deleteShortcode:function(a,b,c){this.checkContentType();var d=this.getContentModel(c),e=this.getShortcodeIndex(a,c);d[b].splice(e,1),this.sendData(c)},findAllTreeChildren:function(a,c,d){var e=this,f=[];this.checkContentType();var g=this.getContentModel(d);return b.each(g[c],function(g,h){h.parent_id==a&&(f.push(h.id),f=b.merge(f,e.findAllTreeChildren(h.id,c,d)))}),f},findAllTreeChildrenShortcode:function(a,c,d){var e=this,f=[];this.checkContentType();var g=this.getContentModel(d);return b.each(g[c],function(g,h){h.parent_id==a&&(f.push(h),f=b.merge(f,e.findAllTreeChildrenShortcode(h.id,c,d)))}),f},modifyShortcode:function(a){var b={};for(var c in a.attrs)b[c]=a.attrs[c];return b.sed_model_id=a.id,a.attrs=b,a},getShortcode:function(a,d){if(b('[sed_model_id="'+a+'"]').length>0){var e=b('[sed_model_id="'+a+'"]').parents(".sed-pb-post-container:first");c.shortcodeCurrentPlace=e.data("contentType"),this.checkContentType()}var f,g=this.getContentModel(d);return b.each(g,function(c,d){b.each(d,function(b,c){if(c.id==a)return f=c,!1})}),f},getAttrs:function(a,d){if(d=!(_.isUndefined(d)||d!==!0),b('[sed_model_id="'+a+'"]').length>0){var e=b('[sed_model_id="'+a+'"]').parents(".sed-pb-post-container:first");c.shortcodeCurrentPlace=e.data("contentType"),this.checkContentType()}var f=this.getShortcode(a);if(f){if(d===!1)return f.attrs;var g=this.getContentModel(),h=c.pageBuilder.getPostId(b('[sed_model_id="'+a+'"]')),i=_.findWhere(g[h],{tag:"content",parent_id:a});if(!i)return f.attrs;var j=b.extend(!0,{},f.attrs);return j.sed_shortcode_content=i.content,j}},getShortcodeIndex:function(a,d){if(b('[sed_model_id="'+a+'"]').length>0){var e=b('[sed_model_id="'+a+'"]').parents(".sed-pb-post-container:first");c.shortcodeCurrentPlace=e.data("contentType"),this.checkContentType()}var f,g=this.getContentModel(d);return b.each(g,function(c,d){b.each(d,function(b,c){if(c.id==a)return f=b,!1})}),f},updateModulesOrder:function(a,d,e,f){if(e&&a.item.attr("sed_model_id")){var g=a.item,h=e.data("parentId"),i=g.attr("sed_model_id"),j=this.getShortcode(i,f),k=g.next(".sed-row-pb"),l=g.prev(),m=[],n=c.pageBuilder.getPostId(g);if(!d||j){m=this.findAllTreeChildrenShortcode(i,n,f),m.unshift(j),this.deleteModule(i,n,"",f);m.length;if(k.length>0){var o=k.attr("sed_model_id"),p=this.getShortcodeIndex(o),q=this.getShortcode(o);h=q.parent_id;var r=b.merge([p,0],m);Array.prototype.splice.apply(this.contentModel[n],r)}else if(l.length>0){var s=l.attr("sed_model_id"),t=this.getShortcodeIndex(s),u=this.getShortcode(s);h=u.parent_id;var v=this.findAllTreeChildren(s,n),w=t+v.length+1;this.addShortcodesToParent(h,m,n,w)}else d&&this.addShortcodesToParent(h,m,n);var x=this.getShortcode(i);x.parent_id=h,this.sendData()}}},getShortcodeById:function(a){},updateShortcode:function(a){var d=this;if(b('[sed_model_id="'+a.id+'"]').length>0){var e=b('[sed_model_id="'+a.id+'"]').parents(".sed-pb-post-container:first");c.shortcodeCurrentPlace=e.data("contentType"),this.checkContentType()}this.contentModel=b.each(this.contentModel,function(c,e){d.contentModel[c]=b.map(e,function(c){return a.id==c.id?c=b.extend(c,a):c})}),this.sendData()},updateShortcodeAttr:function(a,b,d){if(d=d?d:c.currentSedElementId?c.currentSedElementId:""){var e=this.getShortcode(d);e&&"sed_shortcode_content"!=a&&(e.attrs[a]=b,this.updateShortcode(e))}},updateShortcodeContent:function(a,d){if(!_.isUndefined(a)&&a&&!_.isUndefined(d)){var e=this.getContentModel(),f=c.pageBuilder.getPostId(b('[sed_model_id="'+a+'"]')),g=_.findWhere(e[f],{tag:"content",parent_id:a});g&&(g.content=d,this.updateShortcode(g))}},do_shortcode_cache:function(a){var b=_.find(this.compiledShortcodes,function(b){return _.isEqual(a.param,b.param)&&a.tpl==b.tpl});return!!b&&b.content},saveDoShortcodeResult:function(a,c,d){var e=b.extend({},a);this.compiledShortcodes.push({tpl:d,content:c,param:e})},do_shortcode:function(a,d,e){var f,g,h,i,j=this;if(e!=d&&"sed_row"==a&&b('[sed_model_id="'+d+'"]').length>0){var k=b('[sed_model_id="'+d+'"]').find(">.sed-pb-module-container .sed-pb-module-container:first").attr("sed_model_id"),l=this.getShortcode(k),m=c.shortcodes[l.tag].moduleName;if(_.isUndefined(c.modulesSettings[m].refresh_in_drag_area)||!c.modulesSettings[m].refresh_in_drag_area)return b('[sed_model_id="'+d+'"]')[0].outerHTML}if("undefined"==typeof d){var n="SED_ERROR : id is not defined for shortcode "+a;return void console.error(n)}if(i=this.loadShortcodeParam(d),_.isObject(i)&&!_.isUndefined(i.param)&&!_.isUndefined(i.module)){f=i.param,h=i.module,!_.isUndefined(c.shortcodeCreate[a])&&_.isFunction(c.shortcodeCreate[a])&&(f=c.shortcodeCreate[a](d,f));var o=b("#"+f.skinId).html();"undefined"==typeof o&&console.error("tpl "+f.skinId+" is not defined.");var p=this.getShortcodeChildren(d),q="";if(b.each(p,function(a,b){if("content"==b.tag)q+=b.content;else{var c=j.do_shortcode(b.tag,b.id,e);if(_.isUndefined(c)||c===!1)return void(q=!1);q+=c}}),q!==!1&&(f.context.content=q,!_.isUndefined(o)))return _.isUndefined(c.modulesSettings[h].tpl_type)||"underscore"!=c.modulesSettings[h].tpl_type?g=Handlebars.compile(o):(f.context.className=_.clone(f.context["class"]),delete f.context["class"],g=c.template(f.skinId)),q=g(f.context),q=c.applyFilters("doShortcodeFilter",q,a,d,e)}},loadShortcodeParam:function(a){var d,e,f,g=this.getShortcode(a),h=_.isUndefined(g.attrs)||_.isUndefined(g.attrs.parent_module)?"":g.attrs.parent_module,i=c.shortcodes[g.tag],j={};b('[sed_model_id="'+a+'"]');if(c.pageBuilder.moduleScriptsLoad(c.shortcodesScripts[g.tag]),c.pageBuilder.moduleStylesLoad(c.shortcodesStyles[g.tag]),!h&&i.asModule&&(h=i.moduleName),h){d=b.extend({},i.attrs,g.attrs),b.inArray(i.name,["sed_module","sed_row"])==-1&&_.isUndefined(d.contextmenu_disabled)&&(b.trim(d["class"])?d["class"]=b.trim(d["class"])+" module_"+g.tag+"_contextmenu":d["class"]="module_"+g.tag+"_contextmenu"),_.isUndefined(d.has_cover)||(d.has_cover="sed-module-cover=has-cover"),i.asModule&&_.isUndefined(d.settings_disabled)&&(d["class"]+=" sed-pb-module-container");var k=d.animation;k=k.split(",");var l="";k[3]&&(d["class"]+=" "+k[3],l+="data-sed-animation="+k[3]+" "),""!=k[0]&&(l+="data-wow-delay="+k[0]+"ms "),""!=k[1]&&(l+="data-wow-iteration="+k[1]+" "),""!=k[2]&&(l+="data-wow-duration="+k[2]+"ms "),""!=k[4]&&(l+="data-wow-offset="+k[4]+" ");var m="";m+=l,m+="sed_model_id="+d.sed_model_id+" ",d.sed_attrs=m;var n=!_.isUndefined(g.attrs.parent_module)&&g.attrs.parent_module?g.attrs.parent_module:"";if(n){if(_.isUndefined(g.attrs)||_.isUndefined(g.attrs.skin)){var o=this.findParentModule(g.parent_id,n,g);e=_.isUndefined(o)||_.isUndefined(o.attrs)||_.isUndefined(o.attrs.skin)?d.skin:o.attrs.skin}else e=_.clone(g.attrs.skin);h=n}f=n?"sed-tpl-"+e+"-"+g.tag:"sed-tpl-"+d.skin+"-"+g.tag,!n&&d.sub_skin?f+="-"+d.sub_skin:d.parent_sub_skin&&n&&(f+="-"+d.parent_sub_skin),j.skinId=f+"-"+h,n&&0==b("#"+j.skinId).length&&(j.skinId="sed-tpl-"+d.skin+"-"+g.tag+"-"+i.moduleLocation,h=i.moduleLocation,e=_.clone(d.skin)),n||(e=_.clone(d.skin));var p={module:h,skin:e},q=_.findWhere(this.loadedSkins,p);if(_.isUndefined(q)){var r=c.modulesInfo[h].skins[e];if(!_.isUndefined(r)){var s=r.scripts;b.isArray(s)&&s.length>0&&c.pageBuilder.moduleScriptsLoad(s);var t=r.styles;b.isArray(t)&&t.length>0&&c.pageBuilder.moduleStylesLoad(t)}this.loadedSkins.push(p)}return j.context=d,i.asModule&&c.pageModulesUsing.push({id:d.id,module:i.moduleName,skin:d.skin}),{param:j,module:h}}"invalid module name or parent module name for this shortcode : "+g.tag},getShortcodeChildren:function(a){this.checkContentType();var c=[];return b.each(this.contentModel,function(d,e){b.each(e,function(b,d){d.parent_id==a&&c.push(d)})}),c},findParentModule:function(a,b,d){this.checkContentType();var e,f;return!_.isUndefined(d.attrs)&&!_.isUndefined(d.attrs.module_helper_id)&&d.attrs.module_helper_id&&(e=this.getShortcode(d.attrs.module_helper_id),e&&(f=c.shortcodes[e.tag],f.asModule&&f.moduleName==b))?e:(e=this.getShortcode(a),_.isUndefined(e)?void 0:(f=c.shortcodes[e.tag],"root"==e.id?void 0:f.asModule&&f.moduleName==b?e:this.findParentModule(e.parent_id,b,e)));
},refreshModule:function(a){var d,e=this.getShortcode(a);if(this.checkContentType(),_.isUndefined(e.attrs)||_.isUndefined(e.attrs.parent_module)||!b.trim(e.attrs.parent_module))c.doShortcodeMode="normal","sed_module"==e.tag||"sed_row"==e.tag?(d=this.do_shortcode(e.tag,a,a),b('[sed_model_id="'+a+'"]').replaceWith(d)):(d=this.do_shortcode("sed_module",e.parent_id,e.parent_id),b('[sed_model_id="'+e.parent_id+'"]').replaceWith(d)),c.Events.trigger("sedAfterRefreshModule",a,e,d);else{var f=this.findParentModule(e.parent_id,e.attrs.parent_module,e);if(_.isUndefined(e.attrs)||_.isUndefined(f.attrs.parent_module)||!b.trim(f.attrs.parent_module)||(f=this.findParentModule(f.parent_id,f.attrs.parent_module,f)),!f||_.isEmpty(f))return;var g=c.pageBuilder.getModuleTransport(f.tag,"shortcode");if("default"==g)c.doShortcodeMode="normal",d=this.do_shortcode("sed_module",f.parent_id,f.parent_id),b('[sed_model_id="'+f.parent_id+'"]').replaceWith(d),c.Events.trigger("sedAfterRefreshModule",a,e,d);else if("ajax"==g){var h=function(d){b('[sed_model_id="'+f.parent_id+'"]').replaceWith(d.data),c.Events.trigger("sedAfterRefreshModule",a,e,d.data)};c.pageBuilder.ajaxLoadModules(f.parent_id,h)}}},stateChange:function(){},sendData:function(a){this.checkContentType(),console.log("------------this.postsContent---------------",this.postsContent);var b=_.isUndefined(a)?c.shortcodeCurrentPlace:a;"theme"==b?this.preview.send("pages_theme_content_update",this.pagesThemeContent):this.preview.send("posts_content_update",this.postsContent)},get:function(){return this.contentModel}}),b(function(){c.postsContent=window._sedAppPostsContent,c.modulesInfo=window._sedAppPageBuilderModulesInfo,c.defaultPatterns=window._sedShortcodesDefaultPatterns,c.pagesThemeContent=window._sedAppPagesThemeContent,c.pageModulesUsing=window._sedAppPageModulesUsing,c.preview.bind("sed_api_shortcodes",function(a){c.shortcodes=a}),c.preview.bind("sed_api_shortcodes_scripts",function(a){c.shortcodesScripts=a}),c.preview.bind("sed_api_shortcodes_styles",function(a){c.shortcodesStyles=a}),c.preview.bind("sed_api_modules_settings",function(a){c.modulesSettings=a,b(".sed-bp-element").livequery(function(){if(!b(this).is("[sed-disable-editing='yes']")){var a=b(this),d=a.find(">.sed-pb-module-container .sed-pb-module-container:first").attr("sed_model_id");if(!_.isUndefined(d)&&d){var e,f,g=c.contentBuilder.getShortcode(d),h=c.shortcodes[g.tag];h.asModule&&(e=h.moduleName,f=c.modulesSettings[e],!_.isUndefined(f.is_special)&&f.is_special&&a.addClass("sed-pb-row-module-special"),!_.isUndefined(f.has_extra_spacing)&&f.has_extra_spacing&&a.addClass("sed-pb-row-extra-spacing"))}}})}),c.preview.bind("sed_api_modules_editor_js",function(a){c.ModulesEditorJs=a}),c.preview.bind("defaultModulePatterns",function(a){c.defaultPatterns=a}),c.contentBuilder=new c.ShortcodeBuilder({},{preview:c.preview,postsContent:c.postsContent,pagesThemeContent:c.pagesThemeContent,shortcodes:c.shortcodes})})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.SiteEditorIframe=c.Class.extend({initialize:function(a,c){var d=this;b.extend(this,c||{}),d.options=b.extend({},a)},getMceToolBar:function(a,b){switch(a){case"title":if(1==b)return"formatselect | bold italic underline strikethrough | fontselect fontsizeselect";if(2==b)return"charmap removeformat | undo redo | link unlink | forecolor backcolor | alignleft aligncenter alignright alignjustify";break;case"paragraph":if(1==b)return"bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | fontselect fontsizeselect";if(2==b)return"pastetext removeformat charmap | bullist numlist outdent indent  | undo redo | link unlink | forecolor backcolor";break;case"normal-paragraph":if(1==b)return"pastetext removeformat charmap | alignleft aligncenter alignright alignjustify | fontselect fontsizeselect";if(2==b)return"bold italic underline strikethrough | outdent indent  | undo redo | link unlink | forecolor backcolor";break;case"simple-paragraph":if(1==b)return"bold italic underline strikethrough | fontselect fontsizeselect";if(2==b)return"pastetext removeformat charmap | undo redo | link unlink | forecolor backcolor";break;case"normal-text":if(1==b)return"formatselect | fontselect fontsizeselect";if(2==b)return"charmap strikethrough | bold italic underline | undo redo | link unlink | forecolor";break;case"simple-text":if(1==b)return"fontselect fontsizeselect | charmap strikethrough";if(2==b)return"bold italic underline | undo redo | forecolor"}},textEditable:function(a,d){d=d?d:"title";var e,f,g=this,h=["advlist autolink link lists charmap spellchecker","wordcount visualchars visualblocks","directionality textcolor colorpicker paste"];this.MceToolBarType=["title","paragraph","normal-paragraph","simple-paragraph","normal-text","simple-text"],e=g.getMceToolBar(d,1),f=g.getMceToolBar(d,2);for(var i="",j=8;j<=100;j++)i+=j+"px",100!=j&&(i+=" ");tinymce.init({selector:a,plugins:h,fontsize_formats:i,font_formats:c.mceFontFormats,toolbar1:e,toolbar2:f,menubar:!1,inline:!0,toolbar_items_size:"small",resize:!1,object_resizing:!1,paste_as_text:!0,setup:function(a){a.on("focus",function(c){_.isUndefined(b("#"+this.id).data("toolbar1"))||(b.inArray(b("#"+this.id).data("toolbar1"),g.MceToolBarType)==-1?a.settings.toolbar1=b("#"+this.id).data("toolbar1"):a.settings.toolbar1=g.getMceToolBar(b("#"+this.id).data("toolbar1"),1)),_.isUndefined(b("#"+this.id).data("toolbar2"))||(b.inArray(b("#"+this.id).data("toolbar2"),g.MceToolBarType)==-1?a.settings.toolbar2=b("#"+this.id).data("toolbar2"):a.settings.toolbar2=g.getMceToolBar(b("#"+this.id).data("toolbar2"),2))}),a.on("change",function(a){if(!_.isUndefined(a.originalEvent)&&!_.isUndefined(a.originalEvent.command)&&"fontname"==a.originalEvent.command.toLowerCase()){var d=[],e=b("#"+this.id).attr("sed_model_id"),f=c.contentBuilder.getShortcode(e),g=f.parent_id;b('[sed_model_id="'+g+'"]').find("[style]").each(function(){var a=b(this)[0].style.fontFamily;_.isUndefined(a)||_.isEmpty(a)||(a=a.replace(/\"/g,""),a=a.replace(/\'/g,""),d.push(a))}),c.typography.loadFont(a.originalEvent.value,g,d)}var h=this.getContent({format:"html"}),i=(c.pageBuilder.getPostId(b("#"+this.id)),c.contentBuilder.getShortcodeChildren(b("#"+this.id).attr("sed_model_id")));if(1!=i.length)return void alert("In Text Editor content not Allowed using any shortcodes");var j=i[0];return"content"!=j.tag?void alert("your shortcode incorrect , shortcode not AS content model"):(j.content=h,c.contentBuilder.updateShortcode(j),void b("#"+this.id).trigger("sed.changeMCEContent",[h]))})}})}}),c.SiteEditorTypography=c.Class.extend({initialize:function(a,d){this.fonts=c.fonts,this.loadedFonts=[],this.googleFontsSettings="",this.baseLoadedFonts=[],b.extend(this,d||{})},loadFont:function(a,c,d){return b.inArray(a,this.loadedFonts)!=-1||b.inArray(a,this.baseLoadedFonts)!=-1?void(_.isUndefined(c)||_.isUndefined(d)||this.sendData(c,d)):(b.inArray(a,_.keys(this.fonts.custom_fonts))!=-1?this.loadCustomFont(a):b.inArray(a,_.keys(this.fonts.google_fonts))!=-1&&this.loadGoogleFont(a),void(_.isUndefined(c)||_.isUndefined(d)||this.sendData(c,d)))},loadCustomFont:function(a){var c="@font-face {";c+="font-family: "+this.customFontsSettings[a].name+";",c+='src: url("'+this.customFontsSettings[a].src.eot+'");',c+="src:",c+="url('"+this.customFontsSettings[a].src.eot+"?#iefix') format('eot'),",c+="url('"+this.customFontsSettings[a].src.woff+"') format('woff'),",c+="url('"+this.customFontsSettings[a].src.ttf+"') format('truetype'),",c+="url('"+this.customFontsSettings[a].src.svg+"#"+this.customFontsSettings[a].name+"') format('svg');",c+="font-weight: 400;",c+="font-style: normal;",c+="}";var d='<style type="text/css">'+c+"</style>";b(d).appendTo(b("head")),this.loadedFonts.push(a)},loadGoogleFont:function(a){var c=a.replace(/\s+/g,"+"),d=IS_SSL?"https":"http";_.isEmpty(this.googleFontsSettings)||(c+=":"+this.googleFontsSettings),b("head").append('<link href="'+d+"://fonts.googleapis.com/css?family="+c+'" rel="stylesheet" type="text/css">'),this.loadedFonts.push(a)},sendData:function(a,b){b=_.uniq(b),b=b.join(","),c.contentBuilder.updateShortcodeAttr("fonts",b,a)}}),b(function(){c.settings=window._sedAppEditorSettings,c.mceFontFormats=window._sedTinymceFontFormats,c.fonts=window._sedAppEditorFonts,c.typography=new c.SiteEditorTypography({},{googleFontsSettings:window._sedGoogleFontsSettings,customFontsSettings:window._sedCustomFontsSettings,baseLoadedFonts:window._sedBaseLoadedFonts}),c.siteIframe=new c.SiteEditorIframe({},{preview:c.preview})})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.AppPreviewPlugin=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready(),this.type,this.mode="off"},ready:function(){var a=this;b("body").addClass("sed-app-editor"),c.Events.bind("changePreviewMode",function(a){_.isUndefined(c.videoAudioTags)||b.each(c.videoAudioTags,function(a,d){b('[sed_model_id="'+d+'"]').is("[sed-disable-editing='yes']")||(b('[sed_model_id="'+d+'"]').length>0?c.contentBuilder.refreshModule(d):delete c.videoAudioTags[a])})}),c.preview.bind("previewMode",function(b){c.Events.trigger("startChangePreviewMode",b),"on"==b?(a.mode="on",a.previewEnable()):"off"==b&&(a.mode="off",a.previewDisable()),c.Events.trigger("changePreviewMode",a.mode)})},scrollBarReset:function(a){b(window).scrollTop(this.editorScrollPos)},scrollBarReposition:function(a){b(window).scrollTop(0)},callWOWJs:function(a){var b=new WOW({boxClass:"wow",animateClass:"animated",offset:0});b.init()},previewDisable:function(a){b("body").addClass("sed-app-editor").removeClass("sed-app-preview"),this.textEditorsEnable(),this.freeDraggableMode(!1),this.scrollBarReset()},previewEnable:function(a){this.editorScrollPos=b(window).scrollTop(),b("body").addClass("sed-app-preview").removeClass("sed-app-editor"),b(".sed-app-preview .mce-content-body").off("click"),this.textEditorsDisable(),this.scrollBarReposition(),this.callWOWJs(),this.freeDraggableMode(!0),this.contextmenuDisable()},textEditorsDisable:function(){_.isUndefined(tinymce)||_.isUndefined(tinymce.activeEditor)||_.isNull(tinymce.activeEditor)||(console.log("tinymce.activeEditor-------------",tinymce.activeEditor),b("#"+tinymce.activeEditor.id).hasClass("mce-edit-focus")?this.activeEditorId=tinymce.activeEditor.id:this.activeEditorId=!1,_.each(tinymce.editors,function(a){b(a.getBody()).prop("contenteditable",!1)}))},textEditorsEnable:function(){"undefined"!=typeof tinymce&&_.each(tinymce.editors,function(a){b(a.getBody()).prop("contenteditable",!0)})},freeDraggableMode:function(a){a=!!_.isUndefined(a)||a,b(".module-element-draggable").draggable({disabled:a})},contextmenuDisable:function(){},linkEnabled:function(a){},keyboardShortcutDisable:function(a){}}),b(function(){c.appPreview=new c.AppPreviewPlugin})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.shortcodeUpdate=c.shortcodeUpdate||{},c.shortcodeAutoUpdate=c.shortcodeAutoUpdate||{},c.moduleAttrUpdate=c.moduleAttrUpdate||{},c.sedModulesAttrsValues=c.sedModulesAttrsValues||{},c.fn=c.fn||{},c.PageBuilder=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.jsCounter=0,this.currentModuleContent=[],this.currentAjaxModule=!1,this.ajaxModuleScripts={},this.ajaxModuleStyles={},this.currentDragType,this.resizing=!1,this.columnsMod="create",this.lastColumnsWidth=[],this.modulesAjaxRequests={},this.ready()},ready:function(){var a=(b("body").find(".sed-pb-post-container:first"),this);this.disablePostsFullContentEditing(),c.preview.bind("active",function(){a.modulesHandles()})},modulesDrag:function(a,d){var e,f=this,g=d.ui,h=d.element,i=h.attrs["sed-module-name"],j=this.getPatternByModuleName(i),k=b.extend(!0,{},c.defaultPatterns.sed_module),l=b.extend(!0,{},c.defaultPatterns.sed_row),m=b.merge(b.merge(b.merge([],l),k),j),n=c.sedShortcode.getPatternTransport(m);if("sortStop"==a)if(e=b('[current-sortable-item="yes"]'),e.removeAttr("current-sortable-item"),f.currentDragType="regular",f.currentModuleContent=[],f.currentPostId=f.getPostId(e),c.currentModule=i,"widget"==i){var o=function(){c.widgetBuilder.widgetsHandler(h,i,e,g.direction)},p=[];p.push(c.ModulesEditorJs[i]);var q=this._checkLoadedScript(p,this.wpScripts);b.isArray(q)&&q.length>0?this.moduleScriptsLoad(q,o):o()}else"ajax"==n?f.ajaxHandlerModules(i,e,g.direction):f.directlyHandlerModules(i,e,g.direction);else if("drop"==a)if(e=b('[current-droppable-item="yes"]'),e.removeAttr("current-droppable-item"),f.currentDragType="free",f.currentModuleContent=[],f.currentPostId=f.getPostId(e),f.currentHelperOffset=g.offset,"widget"==i){var o=function(){c.widgetBuilder.widgetsHandler(h,i,e,"none")},p=[];p.push(c.ModulesEditorJs[i]);var q=this._checkLoadedScript(p,this.wpScripts);b.isArray(q)&&q.length>0?this.moduleScriptsLoad(q,o):o()}else"ajax"==n?f.ajaxHandlerModules(i,e,"none"):f.directlyHandlerModules(i,e,"none")},ajaxLoadModules:function(a,d,e,f){var g,h,i=this,j=c.contentBuilder.getShortcode(a);if(h=b('[sed_model_id="'+a+'"]').length>0?this.getPostId(b('[sed_model_id="'+a+'"]')):this.currentPostId,f=_.isUndefined(f)?b('[sed_model_id="'+a+'"]').length>0?b('[sed_model_id="'+a+'"]'):"body":f,_.isUndefined(h)||0==h)return void c.log("---------postId Error : postId Is Undefined. pagebuilder.min.js *ajaxLoadModules* method  ");g=c.contentBuilder.findAllTreeChildrenShortcode(a,h),g.unshift(j);var k={pattern:JSON.stringify(g),parent_id:j.parent_id,action:"load_modules",nonce:c.settings.nonce.module.load,sed_page_ajax:"sed_load_modules"};k.post_id=h,b(f).addClass("module-ajax-loading-container");var l=new c.Ajax({data:k,success:function(){b(f).removeClass("module-ajax-loading-container"),i.modulesAjaxRequests[a].processing=!1;var c=this.response;_.isUndefined(d&&"function"==typeof d)||d(c)},error:function(){b(f).removeClass("module-ajax-loading-container"),i.modulesAjaxRequests[a].processing=!1,_.isUndefined(e)||"function"!=typeof e||e(resp)},loadingType:"medium"},{container:f,repeatRequest:!0});l.request.fail(function(){i.modulesAjaxRequests[a].processing=!1}),this.modulesAjaxRequests[a]={processing:!0,request:l.request}},ajaxHandlerModules:function(a,d,e){var f,g,h,i=this;g='<div class="module-loading-container" ></div>',h="down"==e?b(g).insertBefore(d):"up"==e?b(g).insertAfter(d):b(g).appendTo(d),i.currentAjaxModule=a,i.ajaxModuleScripts[a]=[],i.ajaxModuleStyles[a]=[],f=this.createNewModule(a,d,e),c.Events.trigger("afterCreateNewModuleModel",a,f);var j=function(f){var g=i.getPatternByModuleName(a),j=b.extend(!0,{},c.defaultPatterns.sed_module),k=b.extend(!0,{},c.defaultPatterns.sed_row),l=b.merge(b.merge(b.merge([],k),j),g),m=function(){h.remove(),i.addModuleToPost(a,d,e,f.data);var g=c.sedShortcode.getPatternScripts(l),j=c.sedShortcode.getPatternStyles(l);b.isArray(g)&&g.length>0&&c.pageBuilder.moduleScriptsLoad(g),b.isArray(j)&&j.length>0&&c.pageBuilder.moduleStylesLoad(j)},n=c.sedShortcode.getPatternModulesScripts(l);if(_.isUndefined(n))m();else{var o=i._checkLoadedScript(n,i.wpScripts);b.isArray(o)&&o.length>0?i.moduleScriptsLoad(o,m):m()}};this.ajaxLoadModules(f,j,"",h),i.currentAjaxModule=!1},getShortcodePatternByModuleName:function(a){var d;return b.each(c.shortcodes,function(b,c){if(c.asModule&&c.moduleName==a)return d=b,!1}),!!d&&c.shortcodes[d].pattern},getPatternByModuleName:function(a){var d;return b.each(c.shortcodes,function(b,c){if(c.asModule&&c.moduleName==a)return d=b,!1}),!!d&&c.applyFilters("sedDefaultPatternFilter",c.defaultPatterns[d],d)},createNewModule:function(a,b,c){var d;d="free"==this.currentDragType||"none"!=c?b.attr("sed_model_id"):b.data("parentId");var e,f;return f="none"!=c,e=this.addShortcodeModule(d,c,a,f,b)},addModuleToPost:function(a,d,e,f){var g;g="free"==this.currentDragType||"none"!=e?d.attr("sed_model_id"):d.data("parentId");var h,i;_.isUndefined(f)&&(i=this.createNewModule(a,d,e),f=c.contentBuilder.do_shortcode("sed_row",i,i)),this.columnsMod="create",h="down"==e?b(f).insertBefore(d):"up"==e?b(f).insertAfter(d):b(f).appendTo(d),c.Events.trigger("afterCreateModule",h,a,d,e),"row"==a&&c.Events.trigger("createNewRowDraggableEl",h.find('[data-type-row="draggable-element"]:first'));var j=this.getShortcodeByModuleName(a),k=function(a,d){var e;b.each(c.contextMenuSettings,function(b,c){if(c.shortcode&&c.shortcode==a.name)return e=c.menu_id,!1}),e&&d.data("moduleContextmenu",e)};if("free"==this.currentDragType&&j){c.Events.trigger("createNewModuleDraggable",a,h,d),k(j,h);var l=this.currentHelperOffset.top-d.offset().top,m=this.currentHelperOffset.left-d.offset().left;h.css({width:j.attrs.default_width||"100%",height:j.attrs.default_height||"auto",top:l+"px",left:m+"px"}),m+h.outerWidth(!0)>d.width()&&h.css({left:d.width()-h.outerWidth(!0)+"px"}),l+h.outerHeight(!0)>d.height()&&d.height(l+h.outerHeight(!0))}this.getPostId(h);id=h.find(">.sed-pb-module-container .sed-pb-module-container:first").attr("sed_model_id"),module_container=b('[sed_model_id="'+id+'"]').parents(".sed-pb-module-container:first");var n=!1;return _.isUndefined(c.modulesSettings[a])||_.isUndefined(c.modulesSettings[a].show_settings_on_create)||!c.modulesSettings[a].show_settings_on_create||(n=!0),c.selectPlugin.select(b('[sed_model_id="'+id+'"]'),n),h},getShortcodeByModuleName:function(a){var d=!1;return b.each(c.shortcodes,function(b,c){if(c.asModule&&c.moduleName==a)return d=c,!1}),d},addAlignSpacingAttrToModule:function(a,b){var d=this.getShortcodeByModuleName(a);if(!_.isUndefined(c.shortcodes[d.name])&&!_.isUndefined(c.shortcodes[d.name].params)){var e=["module_align","spacing_left","spacing_top","spacing_bottom","spacing_right","spacing_lock"],f=["text_align","padding_left","padding_top","padding_bottom","padding_right","padding_lock"];_.each(f,function(a,f){var g;"module_align"==e[f]?g=c.shortcodes[d.name].params[e[f]]:_.isUndefined(c.shortcodes[d.name].params.fieldset_spacing)||(g=c.shortcodes[d.name].params.fieldset_spacing[e[f]]),_.isUndefined(g)||(b[e[f]]=g.value)})}return b},addShortcodeModule:function(a,d,e,f,g){var h,i,j,k=this;if(a){if("none"==d)j=a;else{if(h=this.contentBuilder.getShortcode(a),!h)return;j=h.parent_id}if(i=this.getPatternByModuleName(e),b.isArray(i)&&0!=i.length){var l,m=b.extend(!0,{},i),n=b.extend(!0,{},c.defaultPatterns.sed_module),o=b.extend(!0,{},c.defaultPatterns.sed_row),p=(c.modulesSettings[e].shortcode,{});"regular"==k.currentDragType?(o[0].attrs.type="static-element","row-container"==e?o[0].attrs.length="boxed":o[0].attrs.length="wide"):"free"==k.currentDragType&&(p["class"]+="module-element-draggable"),n[0].attrs=p;var q=_.clone(m[0].parent_id);m=_.map(m,function(a){return a.parent_id==q&&(a.parent_id=n[0].id),a}),"regular"==k.currentDragType?(n[0].parent_id=o[0].id,l=b.merge(b.merge(b.merge([],o),n),m)):"free"==k.currentDragType&&(l=b.merge(b.merge([],n),m));var r,s,t=this.loadPattern(l,j);"root"==a&&"none"==d?(c.shortcodeCurrentPlace=g.data("contentType"),r=g.data("postId")):r=this.getPostId(b('[sed_model_id="'+a+'"]'));var u=t[0].id;if(t=this.setHelperShortcodes(t,e),t=this.shortcodesPatternFilter(t),"down"==d)s=0;else if("up"==d)s=1;else if("none"==d)return this.contentBuilder.addShortcodesToParent(j,t,r),this.syncStyleEditorPreview(t),u;var v=f?a:"";return this.contentBuilder.addShortcodeModule(t,r,v,s),this.syncStyleEditorPreview(t),u}}},setHelperShortcodes:function(a,c,d){if(d=d?d:"moduleName","moduleName"==d)var e=this.getShortcodeByModuleName(c),f=e.name;else{if("tag"!=d)return void alert("type : "+d+" for helper shortcodes is incorrect ");var f=c}var g=_.findWhere(a,{tag:f}),h=_.filter(a,function(a){return a.parent_id==g.parent_id&&a.id!=g.id}),i=_.pluck(h,"id");return _.each(a,function(c){b.inArray(c.id,i)!=-1&&(_.isUndefined(c.attrs)&&(c.attrs={}),c.attrs.module_helper_id=g.id),_.isUndefined(c.attrs)||_.isUndefined(c.attrs.have_helper_id)||(_.each(a,function(a){a.parent_id==c.parent_id&&a.id!=c.id&&(_.isUndefined(a.attrs)||_.isUndefined(a.attrs.is_helper_id)||(a.attrs.module_helper_id=c.id,delete a.attrs.is_helper_id))}),delete c.attrs.have_helper_id)}),a},shortcodesPatternFilter:function(a){var b=_.filter(a,function(a){return!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs.sed_id)});return _.each(b,function(b){var c=b.attrs.sed_id,d=b.id;a=_.map(a,function(a){return _.isUndefined(a.attrs)||_.each(a.attrs,function(b,e){_.isString(b)&&b.indexOf(c)>-1&&(a.attrs[e]=b.replace(c,d))}),a})}),a},getModuleContextmenuClass:function(a){return"module_"+a+"_contextmenu_container "},moduleScriptsLoad:function(a,d){var e=this,f=e.wpScripts||[];if(a=a||[],0!=a.length){var g=new c.ModulesScriptsLoader;g.moduleScStLoad(a,f,function(){b.each(a,function(a,c){b.inArray(c[0],e.wpScripts)==-1&&e.wpScripts.push(c[0])}),d&&d()})}},moduleStylesLoad:function(a,d){var e=this,f=e.wpStyles||[];if(a=a||[],0!=a.length){var g=new c.ModulesScriptsLoader;g.moduleScStLoad(a,f,function(){b.each(a,function(a,c){b.inArray(c[0],e.wpStyles)==-1&&e.wpStyles.push(c[0])}),d&&d()},"css")}},_checkLoadedScript:function(a,c){return b.isArray(a)&&(a=b.grep(a,function(a,d){return!(b.inArray(a[0],c)!=-1||!a[0]||!a[1])})),a},directlyHandlerModules:function(a,d,e){var f=this,g=f.getPatternByModuleName(a),h=b.extend(!0,{},c.defaultPatterns.sed_module),i=b.extend(!0,{},c.defaultPatterns.sed_row),j=b.merge(b.merge(b.merge([],i),h),g),k=function(){f.addModuleToPost(a,d,e);var g=c.sedShortcode.getPatternScripts(j),h=c.sedShortcode.getPatternStyles(j);b.isArray(g)&&g.length>0&&c.pageBuilder.moduleScriptsLoad(g),b.isArray(h)&&h.length>0&&c.pageBuilder.moduleStylesLoad(h)},l=c.sedShortcode.getPatternModulesScripts(j);if(_.isUndefined(l))k();else{var m=f._checkLoadedScript(l,f.wpScripts);b.isArray(m)&&m.length>0?f.moduleScriptsLoad(m,k):k()}},getPostId:function(a){var b=a.parents(".sed-pb-post-container:first");return c.shortcodeCurrentPlace=b.data("contentType"),b.data("postId")},sedGuid:function(){return this.SEDID()+this.SEDID()+"-"+this.SEDID()},SEDID:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},getNewId:function(){return _.uniqueId("sed-gid-")},loadPattern:function(a,d){if(b.isArray(a)&&0!=a.length){var e=[],f=this,g={};return e=_.map(a,function(e,h){var i;if(f.currentAjaxModule&&(f.ajaxModuleScripts[f.currentAjaxModule]=b.merge(f.ajaxModuleScripts[f.currentAjaxModule],c.shortcodesScripts[e.tag]||[]),f.ajaxModuleStyles[f.currentAjaxModule]=b.merge(f.ajaxModuleStyles[f.currentAjaxModule],c.shortcodesStyles[e.tag]||[])),"content"!=e.tag){var j=c.shortcodes[e.tag];if("undefined"==typeof j)return void console.error("shortcode "+e.tag+" is not defined")}return i=f.getNewId(),g[e.id]=i,e.id=i,e.parent_id==a[0].parent_id&&(e.parent_id=d),_.isUndefined(e.attrs)&&(e.attrs={}),e.attrs.sed_model_id=i,e.attrs=f.sanitizeAttrsValues(e.attrs)||{},e}),"root"!=d&&(g.root=d),e=_.map(e,function(a){return _.isUndefined(g[a.parent_id])||(a.parent_id=g[a.parent_id]),a})}},syncStyleEditorPreview:function(a){_.each(a,function(a){if(!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs.sed_css)&&!_.isEmpty(a.attrs.sed_css)){var d=b.extend(!0,{},a.attrs.sed_css);c.contentBuilder.updateShortcodeAttr("sed_css",{},a.id),_.each(d,function(d,e){var f=/\[\s*(sed_model_id)\s*=\s*["\']?([^"\']*)["\']?\s*\]/g,g=e.replace(f,'[sed_model_id="'+a.id+'"]');b.each(d,function(b,d){c.preview.trigger("current_css_setting_type","module"),c.preview.trigger("current_css_selector",g),c.preview.trigger("current_element",a.id),c(b).set(d)})})}})},sanitizeAttrsValues:function(a){return _.isObject(a)&&!_.isEmpty(a)&&_.each(a,function(b,c){"true"===b?b=!0:"false"===b&&(b=!1),a[c]=b}),a},addNewShortcodeElement:function(a,d,e){var f=c.contentBuilder.getShortcodeChildren(a);if(d=d||[],b.isArray(f)&&0!=f.length){var g,h=[],i=this;return b.each(f,function(a,c){var f=i.getNewId(),j=d[a];if(g={parent_id:e,tag:c.tag,attrs:b.extend(!0,c.attrs||{},j||{}),id:f},"content"==c.tag&&(g.content=c.content),h.push(g),d.length>0){d.shift()}var k=i.addNewShortcodeElement(c.id,d,f);h=b.merge(h,k||[])}),h}return[]},modulesSortable:function(){var a,d,e,f=this,g=!1,h=null,i={appendTo:document.body,containment:"body",cursorAt:{top:15,left:114},cursor:"move",connectWith:".sed-pb-component,.sed-pb-main-component",cancel:".empty-column",items:">.sed-row-pb",zIndex:1070,revert:!0,placeholder:"sed-state-highlight-row",handle:".drag_pb_btn",helper:function(){return b(b("#tmpl-drag-n-drop-helper").html())},start:function(d,f){a=b(this);var g=f.item.parents(".sed-pb-post-container:first");e=g.data("contentType"),b("body").addClass("module-dragging-mode"),c.Events.trigger("moduleSortableStartEvent",f)},over:function(c,d){d.sender&&a[0]==d.sender[0]&&f.addRemoveSortableClass(d.sender,1);var e=b(this);e.hasClass("sed-pb-empty-sortable-area")&&b(this).removeClass("sed-pb-empty-sortable-area")},out:function(a,c){f.addRemoveSortableClass(b(this))},stop:function(i,j){if(b("body").removeClass("module-dragging-mode"),b(".sed-pb-component").each(function(a,c){f.addRemoveSortableClass(b(this))}),!j.item.parent().hasClass("sed-site-main-part")&&j.item.hasClass("sed-main-content-row-role"))return f.addRemoveSortableClass(j.item.parents(".sed-pb-component:first"),1),a.removeClass("sed-pb-empty-sortable-area"),alert("You do not Allow to Content layout drag in to any drop area only allow sort it with layout rows"),g=!1,!1;c.Events.trigger("moduleBeforeSortableStopEvent",j,b(this));var k=c.applyFilters("modulesSortableFilters",{sort:!0,domUpdate:g},j,h,d,a,e);if(g=_.clone(k.domUpdate),k.sort===!1)return!1;g===!0&&(c.contentBuilder.updateModulesOrder(j,h,d,e),g=!1);var l=j.item.find(">.sed-pb-module-container .sed-pb-module-container:first");l.trigger("sed.moduleSortableStop"),l.find(".sed-row-pb > .sed-pb-module-container").each(function(){b(this).find(".sed-pb-module-container:first").trigger("sed.moduleSortableStop")}),c.Events.trigger("moduleSortableStopEvent",j,b(this))},update:function(a,c){g=!0,h=c.sender,d=b(this)},revert:100,scrollSpeed:40};b(".sed-pb-component").livequery(function(){b(this).sortable(i),f.addRemoveSortableClass(b(this))});var j=b.extend(!0,{},i);j.cancel=".sed-public-theme-row,.empty-column",j.connectWith=".sed-pb-component",b(".sed-pb-main-component").sortable(j)},addRemoveSortableClass:function(a,b){b=b?b:0,this.checkEmptySortableArea(a)==b?a.addClass("sed-pb-empty-sortable-area"):this.checkEmptySortableArea(a)>b&&a.removeClass("sed-pb-empty-sortable-area")},checkEmptySortableArea:function(a){return a.children(".sed-bp-element").length},disablePostsFullContentEditing:function(){b(".sed-pb-post-container-disable-editing").find(".sed-bp-element").attr("sed-disable-editing","yes"),b(".sed-pb-post-container-disable-editing").find('[sed-module-cover="has-cover"]').attr("sed-disable-editing","yes"),b(".sed-pb-post-container-disable-editing").find(".sed-column-pb").attr("sed-disable-editing","yes"),b(".sed-pb-post-container-disable-editing").find(".sed-pb-component").addClass("sed-pb-component-no-editable").removeClass("sed-pb-component"),b(".sed-pb-post-container-disable-editing").find(".sed-pb-module-container").attr("sed-disable-editing","yes")},modulesHandles:function(){var a=this,d=[".sed-bp-element[sed_model_id]"];b.each(c.settings.staticModules,function(a,c){_.isUndefined(c.selector)||(d.push(c.selector),b(c.selector).data("staticModuleId",a),b(c.selector).data("sedModuleAction",c.actions))}),c.selectiveRefresh.bind("partial-content-rendered",function(a){b.each(c.settings.staticModules,function(a,c){_.isUndefined(c.selector)||b(c.selector).data("staticModuleId")||(b(c.selector).data("staticModuleId",a),b(c.selector).data("sedModuleAction",c.actions))})}),console.log("------------moduleSelectors-------------",d);var e=d.join(",");b(e).livequery(function(){if(!b(this).is("[sed-disable-editing='yes']")){var d=b(this);d.hasClass("clearfix")||d.addClass("clearfix"),d.hasClass("sed-bp-element")||(d.addClass("sed-static-module"),d.on("click",function(d){a.resizing===!0||"on"==c.appPreview.mode||b(this).is("[sed-disable-editing='yes']")||(d.preventDefault(),d.stopPropagation(),c.selectPlugin.select(b(this),b(d.target).hasClass("sed_setting_btn_cmp")))})),d.not("[data-type-row='draggable-element']").hover(function(e){if(a.resizing!==!0){if(e.stopPropagation(),d.hasClass("sed-bp-element")&&_.isUndefined(b(this).data("sedModuleType"))){var f=d.find(">.sed-pb-module-container .sed-pb-module-container:first").attr("sed_model_id"),g=c.contentBuilder.getShortcode(f),h=c.shortcodes[g.tag].actions;d.data("sedModuleAction",h)}var i,j;if(_.isUndefined(b(this).data("themeId")))b(this).hasClass("sed-static-module")?(i="static",j=b(this).data("sedModuleAction")):(i="normal",j=b(this).data("sedModuleAction"));else{i="public",j=b(this).data("sedModuleAction");var k=b.inArray("move",j);k>-1&&j.splice(k,1)}if(_.isUndefined(b(this).data("sedModuleType"))||b(this).data("sedModuleType")!=i){_.isUndefined(b(this).data("sedModuleType"))||b(this).find(">.sed-handle-sort-row,>.sed-pb-handle-row-top,>.sed-pb-handle-row-right,>.sed-pb-handle-row-bottom,>.sed-pb-handle-row-left").remove();var l=c.template("tmpl-sed-pb-element-handle"),m=l({type:i,actions:j}),n=b(m).appendTo(b(this));b(this).data("sedModuleType",i)}else var n=b(this).find(">.sed-handle-sort-row,>.sed-pb-handle-row-top,>.sed-pb-handle-row-right,>.sed-pb-handle-row-bottom,>.sed-pb-handle-row-left");b.inArray("remove",j)>-1&&n.find(".remove_pb_btn").data("moduleRelId",d.attr("sed_model_id")),b(".sed-bp-element , .sed-static-module").find(">.sed-handle-sort-row,>.sed-pb-handle-row-top,>.sed-pb-handle-row-right,>.sed-pb-handle-row-bottom,>.sed-pb-handle-row-left").hide(),d.offset().top<=11?d.addClass("sed-pb-row-top-site"):d.removeClass("sed-pb-row-top-site");var o=d.offset().left,p=b("body").outerWidth(!0)-d.outerWidth()-o;o<=13||p<=13?d.addClass("sed-pb-row-full-width"):d.removeClass("sed-pb-row-full-width"),n.show()}},function(c){a.resizing!==!0&&(b(this).parents(".sed-bp-element:first , .sed-static-module:first").length>0&&b(this).parents(".sed-bp-element:first , .sed-static-module:first").eq(0).find(">.sed-handle-sort-row,>.sed-pb-handle-row-top,>.sed-pb-handle-row-right,>.sed-pb-handle-row-bottom,>.sed-pb-handle-row-left").show(),b(this).find(">.sed-handle-sort-row,>.sed-pb-handle-row-top,>.sed-pb-handle-row-right,>.sed-pb-handle-row-bottom,>.sed-pb-handle-row-left").hide())})}}),b('[sed-module-cover="has-cover"]').livequery(function(){var a,d;if(b(this).is("[sed-disable-editing='yes']"))a=b(this).attr("sed_model_id"),d=a+"-cover",b('<div id="'+d+'" class="module-element-force-cover"></div').insertAfter(b(this));else{a=b(this).attr("sed_model_id");var e,f=c.contentBuilder.getShortcode(a);b.each(c.contextMenuSettings,function(a,b){if(b.shortcode&&b.shortcode==f.tag)return e=b.menu_id,!1}),d=a+"-cover";var g=b('<div id="'+d+'" class="module-element-force-cover"></div').insertAfter(b(this));g.addClass(e+"_cover")}}),b(".jp-jplayer video,.jp-jplayer audio,.fullwidth-video video").livequery(function(){if("off"==c.appPreview.mode){var a=b(this).parents(".sed-pb-module-container:first").attr("sed_model_id");_.isUndefined(c.videoAudioTags)&&(c.videoAudioTags={});var d;b.each(c.videoAudioTags,function(b,c){if(c==a)return d=b,!1}),!_.isUndefined(d)&&d&&delete c.videoAudioTags[d],c.videoAudioTags[b(this).attr("id")]=a,b(this).detach()}})},_getBorder:function(a){return parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))},_getMargin:function(a){return parseInt(a.css("margin-left"))+parseInt(a.css("margin-right"))},_getPadding:function(a){return parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))},resizeColumns:function(){var a=this;b(".sed-column-pb").livequery(function(){if(!b(this).is("[sed-disable-editing='yes']")){b(this).each(function(a,b){});var d,e,f,g,h,i,j,k,l=_.debounce(function(){j.trigger("sed.moduleResize"),k.trigger("sed.moduleResize")},500);if(!b(this).hasClass("sed-pb-first-col")){var m=!!b("body").hasClass("rtl-body");b(this).sedColumnResize({unit:"%",isRtl:m,resizeStart:function(b,c){d=c.prev().width(),e=c.prev().outerWidth(),i=c.prev().parent().width(),f=a._getPadding(c.prev()),g=a._getBorder(c.prev()),
h=a._getMargin(c.prev()),a.resizing=!0,j=c.find(".sed-pb-module-container"),k=c.prev().find(".sed-pb-module-container"),j.trigger("sed.moduleResizeStart"),k.trigger("sed.moduleResizeStart")},resize:function(b,c,f,g,h){var m=h.minWidth,n=h.unit;a.resizing=!0;var o=f.prev();h.isRtl===!0?d-c>=m&&d-c<=g&&("%"==n?o.css("width",(e-c)/i*100+"%"):o.width(e-c)):d+c>=m&&d+c<=g&&("%"==n?o.css("width",(e+c)/i*100+"%"):o.width(e+c)),l(),j.trigger("sed.moduleResizing"),k.trigger("sed.moduleResizing")},stop:function(d,e){a.resizing=!1,b.each([e,e.prev()],function(a,b){c.contentBuilder.updateShortcodeAttr("width",b.outerWidth()/i*100+"%",b.attr("sed_model_id"))}),j.trigger("sed.moduleResizeStop"),k.trigger("sed.moduleResizeStop")}})}}})},updateColumnWidth:function(){var a=this;b(".sed-columns-pb").livequery(function(){b(this).is("[sed-disable-editing='yes']")||a.setColsWidth(b(this))})},setColsWidth:function(a){var d=this,e=a,f=e.children(".sed-column-pb"),g=f.length,h=e.width(),i=h/g;d._getPadding(f.eq(0)),d._getBorder(f.eq(0)),d._getMargin(f.eq(0));f.each(function(a,e){var f;a<d.lastColumnsWidth.length&&"update"==d.columnsMod?(f=d.lastColumnsWidth[a]*(d.lastColumnsWidth.length/g)+"%",b(this).css("width",f)):"update"==d.columnsMod&&(f=i/h*100+"%",b(this).css("width",f)),0==a&&b(this).addClass("sed-pb-first-col"),"update"==d.columnsMod&&c.contentBuilder.updateShortcodeAttr("width",f,b(this).attr("sed_model_id"))})},updateColumnsNumber:function(a,d){var e=b('[sed_model_id="'+a+'"]'),f=e.children(".sed-column-pb"),g=f.length;if(b.isNumeric(d)&&(d=parseInt(d),!(d<1))){if(d>20)return void alert("max column is 20");this.lastColumnsWidth=[];for(var h=0;h<g;h++)this.lastColumnsWidth.push(f.eq(h).outerWidth()/e.width()*100);if(this.columnsMod="update",g!=d)if(g<d)for(var i=0;i<d-g;i++){var j=b('[sed_model_id="'+a+'"]').parents(".sed-cols-table:first").next().attr("sed_model_id");c.Events.trigger("sed_add_new_shortcode_element",j,[],"sed_columns","",a)}else{for(var i=1;i<=g-d;i++)c.remove(f.eq(g-i).attr("sed_model_id"));this.setColsWidth(e);for(var i=0;i<d;i++)f.eq(i).find(".sed-row-pb > .sed-pb-module-container").each(function(){b(this).find(".sed-pb-module-container:first").trigger("sedAfterRemoveColumns")})}}},getModuleTransport:function(a,b){b=_.isUndefined(b)?"module":b;var d=a;if("shortcode"==b){var e=c.shortcodes[a];d=e.moduleLocation}if(!_.isUndefined(d)&&!_.isUndefined(c.modulesSettings[d])){var f=_.isUndefined(c.modulesSettings[d].transport)?"default":c.modulesSettings[d].transport;return f}},masonryNumberColumns:function(a,c,d,e){var f=b('[sed_model_id="'+a+'"]'),d=d||".sed-archive-masonry",e=e||".sed-archive-masonry > div",g=f.find(d);b.each([1,2,3,4,5,6],function(a,b){f.find(e).hasClass("sed-column-"+b)&&f.find(e).removeClass("sed-column-"+b)}),to>6?to=6:(to<1||_.isUndefined(to)||!to)&&(to=1);var h="sed-column-"+to;f.find(e).addClass(h),g.masonry()},masonrySpacing:function(){},sendRowData:function(a){var d=a.parents(".sed-pb-module-container:first").parent(),e=b.extend({},c.selectPlugin.getDataContextMenu(d)||{},{shortcodeName:"sed_row"});c.preview.send("rowContainerSettingData",{selector:"sed_row",data:e,extra:{attrs:c.contentBuilder.getAttrs(d.attr("sed_model_id"))||{}},rowId:d.attr("sed_model_id")})},render:function(){this.modulesSortable(),this.updateColumnWidth(),this.resizeColumns()}}),b(function(){if(c.currentPageInfo=window._sedAppCurrentPageInfo,c.attachmentsSettings=window._sedAppPBAttachmentsSettings,console.log("api.attachmentsSettings---",c.attachmentsSettings),c.contextMenuSettings=_.isUndefined(window._sedAppEditorContextMenuSettings)?{}:window._sedAppEditorContextMenuSettings,c.itemContextMenuSettings=_.isUndefined(window._sedAppEditorItemContextMenuSettings)?{}:window._sedAppEditorItemContextMenuSettings,c.pageStaticContentInfo=window._sedAppPageContentInfo,c.pageBuilder=new c.PageBuilder({},{preview:c.preview,contentBuilder:c.contentBuilder,wpScripts:window._wpScripts,wpStyles:window._wpStyles}),c.pageBuilder.render(),c.preview.bind("moduleDragHandler",function(a){c.pageBuilder.modulesDrag(a.option,a.args)}),b("#sed-post-content-container").length>0){var a=decodeURIComponent(b("#sed_template_post_content").html());b("#sed-post-content-container").html(a)}c.preview.bind("active",function(){c.preview.send("resetpageInfoSettings",{pageId:c.currentPageInfo.id,pageType:c.currentPageInfo.type,postType:c.currentPageInfo.post_type}),c.preview.send("checkModuleDragSync"),c.preview.send("syncAttachmentsSettings",c.attachmentsSettings),c.preview.send("currentPageInfo",c.currentPageInfo),c.preview.send("pageStaticContentInfo",c.pageStaticContentInfo),c.Events.trigger("afterPageInfoReady")}),c.fn.getPostMetaSettingId=function(a){return"post"!=c.currentPageInfo.type?void alert("Error : this page is not single post page"):"postmeta["+c.currentPageInfo.post_type+"]["+c.currentPageInfo.id+"]["+a+"]"},c.fn.setCssClass=function(a,b,c){a.data(c)?a.removeClass(a.data(c)).addClass(b):a.addClass(b),a.data(c,b)},c.preview.bind("go_back_to_main_module",function(a){c.selectPlugin.select(b('[sed_model_id="'+a+'"]'),!1)}),c.preview.bind("changePreviewType",function(a){c.preview.send("resetSettings",{pageId:c.currentPageInfo.id,pageType:c.currentPageInfo.type})}),c.preview.bind("current_attr",function(a){c.currentAttr=a}),c.preview.bind("current_shortcode",function(a){c.currentShortcode=a}),c.preview.bind("current_attr_status",function(a){c.currentAttrStatus=a}),c.preview.bind("dataModuleSkins",function(a){c.dataModulesSkins=b.extend(!0,c.dataModulesSkins||{},a),c.log(a),c.preview.send("dataModulesSkinsCache",c.dataModulesSkins)}),c.preview.bind("moduleSkinsTpl",function(a){c.preview.send("moduleSkinsTplCache",a),b.each(a,function(a,c){0==b("#"+a).length&&b("body").append('<script type="text/x-handlebars-template" id="'+a+'">'+c+"</script>")})}),c.preview.bind("isOpenDialogSettings",function(a){c.isOpenDialogSettings=a});var d=null;c("sed_pb_modules",function(a){a.bind(function(a){var e=c.currentSedElementId;if(!_.isUndefined(e)&&e){_.isUndefined(c.sedModulesAttrsValues[e])&&(c.sedModulesAttrsValues[e]={}),c.sedModulesAttrsValues[e][c.currentAttr]=a;var f=c.sedModulesAttrsValues||{},g=function(a){return!!/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(a)&&Number(a)},h=f[e][c.currentAttr];if(h=g(h)===!1?h:g(h),!_.isUndefined(c.shortcodeAutoUpdate[c.currentShortcode])&&!_.isUndefined(c.shortcodeAutoUpdate[c.currentShortcode][c.currentAttr]))return void c.shortcodeAutoUpdate[c.currentShortcode][c.currentAttr](e,h);if("skin"!=c.currentAttr&&"sed_shortcode_content"!=c.currentAttr&&c.contentBuilder.updateShortcodeAttr(c.currentAttr,h,e),"sed_shortcode_content"==c.currentAttr&&c.contentBuilder.updateShortcodeContent(e,h),"hidden_in_mobile"==c.currentAttr||"show_mobile_only"==c.currentAttr){var i=b('[sed_model_id="'+e+'"]').parents(".sed-pb-module-container:first").parent();c.contentBuilder.updateShortcodeAttr(c.currentAttr,h,i.attr("sed_model_id"));var j=i.parent();c.contentBuilder.updateShortcodeAttr(c.currentAttr,h,j.attr("sed_model_id"))}var k=c.pageBuilder.getModuleTransport(c.currentShortcode,"shortcode");if("ajax"==k){var l=c.contentBuilder.getShortcode(e),m=c.pageBuilder.modulesAjaxRequests[l.parent_id];if(!_.isUndefined(m)&&m.processing===!0){var n=function(a){b('[sed_model_id="'+l.parent_id+'"]').replaceWith(a.data)};return d&&clearTimeout(d),void(d=setTimeout(function(){c.pageBuilder.ajaxLoadModules(l.parent_id,n)},1e3))}}if(c.Events.trigger(c.currentShortcode+"_"+c.currentAttr,f,e,h),!_.isUndefined(c.moduleAttrUpdate[c.currentAttr]))return void c.moduleAttrUpdate[c.currentAttr](e,h);if(!_.isUndefined(c.shortcodeUpdate[c.currentShortcode])&&!_.isUndefined(c.shortcodeUpdate[c.currentShortcode][c.currentAttr]))return void c.shortcodeUpdate[c.currentShortcode][c.currentAttr](e,h);if("force_refresh"==c.currentAttrStatus&&"skin"!=c.currentAttr)return void c.preview.send("moduleForceRefresh");if(0==c.currentAttr.search("carousel_")){var o=c.currentAttr.substring(9),p=function(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)};o=o.split("_"),o=_.filter(o,function(a){return a}),o=_.map(o,function(a,b){return 0==b?a:p(a)}),o=o.join("");var q=b('[sed_model_id="'+e+'"]').find(".sed-carousel");return q.data(o,h),void q.trigger("sedChangeDataCarousel")}var r=c.currentAttr.substring(c.currentAttr.length-19);if("_group_hover_effect"==r){var s=c.currentAttr.substring(0,c.currentAttr.length-19);return void c.Events.trigger("setHoverEffectGroup",f,e,s)}var t=c.currentAttr.substring(c.currentAttr.length-11);if("_group_skin"==t){var u=c.currentAttr.substring(0,c.currentAttr.length-11);return void c.Events.trigger("loadGroupModulesSkin",f,e,u)}switch(c.currentAttr){case"group_icon_size":c.fn.updateGroupIcons(e,"font_size",h);var v=b('[sed_model_id="'+e+'"]').find(".hi-icon"),w=b('[sed_model_id="'+e+'"]');v.css("fontSize",h+"px"),w.css("fontSize",h+"px"),v.trigger("sed.changeIconSize",[h]);break;case"group_icon_color":c.fn.updateGroupIcons(e,"color",h);var v=b('[sed_model_id="'+e+'"]').find(".hi-icon");v.css("color",h);break;case"id":b('[sed_model_id="'+e+'"]').attr("id",b.trim(h));break;case"group_images_show_title":c.Events.trigger("setImageGroupAttrs",f,e,"images_group","show_title");break;case"group_images_show_description":c.Events.trigger("setImageGroupAttrs",f,e,"images_group","show_description");break;case"group_images_image_click":c.Events.trigger("setImageGroupAttrs",f,e,"images_group","image_click");break;case"pb_columns":c.pageBuilder.updateColumnsNumber(e,h);break;case"equal_column_width":if(h===!0){var x=b('[sed_model_id="'+e+'"]').find(">.sed-column-pb").length;b('[sed_model_id="'+e+'"]').find(">.sed-column-pb").each(function(){c.contentBuilder.updateShortcodeAttr("width",100/x+"%",b(this).attr("sed_model_id"))}),c.Events.trigger("syncModuleTmpl",e,c.currentShortcode)}break;case"masonry_number_columns":c.pageBuilder.masonryNumberColumns(e,h);break;case"masonry_spacing":c.pageBuilder.masonrySpacing(e,h);break;case"length":var y;y=_.isUndefined(b('[sed_model_id="'+e+'"]').attr("length_element"))?b('[sed_model_id="'+e+'"]').find("[length_element]"):b('[sed_model_id="'+e+'"]'),"boxed"==h?y.addClass("sed-row-boxed").removeClass("sed-row-wide"):y.addClass("sed-row-wide").removeClass("sed-row-boxed"),b('[sed_model_id="'+e+'"]').find(".sed-row-pb > .sed-pb-module-container").trigger("sedChangeModulesLength",[h]);break;case"skin":var z=!1;"force_refresh"==c.currentAttrStatus?z=!0:"ajax"==k&&(z="ajax"),c.Events.trigger("loadModuleskin",f,e,c.currentShortcode,f[e][c.currentAttr],"single",z);break;case"instance":c.Events.trigger("setWidgetInstance",f,e);break;case"thumbnail_using_size":case"main_using_size":c.Events.trigger("mediaGroupUsingSize",f,e,c.currentShortcode,c.currentAttr);break;case"animation":c.Events.trigger("set_animation",f,e);break;default:switch(k){case"default":c.Events.trigger("syncModuleTmpl",e,c.currentShortcode);break;case"ajax":var l=c.contentBuilder.getShortcode(e),n=function(a){b('[sed_model_id="'+l.parent_id+'"]').replaceWith(a.data)};c.pageBuilder.ajaxLoadModules(l.parent_id,n);break;case"refresh":c.preview.send("moduleForceRefresh")}}}})}),c.Events.bind("syncModuleTmpl",function(a,b){new Date;c.contentBuilder.refreshModule(a)});var e=function(a,d,e,f){var g=c.contentBuilder.getShortcode(d),h=c.pageBuilder.getPostId(b('[sed_model_id="'+d+'"]')),i=(c.currentAttr,c.contentBuilder.findAllTreeChildrenShortcode(g.id,h)),j=_.filter(i,function(a){return!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs[e])&&a.attrs[e]==f});return j};c.Events.bind("setHoverEffectGroup",function(a,b,d){var f=a[b][c.currentAttr],g=e(a,b,"sed_hover_effect_group",d);_.each(g,function(a){c.contentBuilder.updateShortcodeAttr("hover_effect",f,a.id)}),c.contentBuilder.refreshModule(b)}),c.Events.bind("setImageGroupAttrs",function(a,b,d,f){var g=a[b][c.currentAttr],h=e(a,b,"sed_image_group",d);_.each(h,function(a){c.contentBuilder.updateShortcodeAttr(f,g,a.id)}),c.contentBuilder.refreshModule(b)}),c.Events.bind("loadGroupModulesSkin",function(a,d,e){var f=c.contentBuilder.getShortcode(d),g=c.pageBuilder.getPostId(b('[sed_model_id="'+d+'"]')),h=a[d][c.currentAttr],i=c.contentBuilder.findAllTreeChildrenShortcode(f.id,g),j=_.filter(i,function(a){return!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs.sed_skin_group)&&a.attrs.sed_skin_group==e});_.each(j,function(b){c.Events.trigger("loadModuleskin",a,b.id,b.tag,h,"group")}),c.contentBuilder.refreshModule(d)}),c.preview.bind("ModuleRefreshChangeSkin",function(a){var d,e,f;f=b("body").find("[data-post-id]:first").data("postId"),c.shortcodeCurrentPlace="theme","page"==a?(d=c.defaultPatterns.sed_posts,e="posts"):"posts"==a&&(d=c.defaultPatterns.sed_archive,e="archive");var g=_.find(c.contentBuilder.pagesThemeContent[f],function(a){return!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs.sed_main_content)&&a.attrs.sed_main_content}),h=c.contentBuilder.getShortcodeChildren(g.id),i=h[0];c.pageBuilder.currentPostId=f;var j=c.pageBuilder.loadPattern(d,i.id);j=c.pageBuilder.setHelperShortcodes(j,e),j=c.pageBuilder.shortcodesPatternFilter(j),c.contentBuilder.deleteModuleTreeChildren(i.id,f),c.contentBuilder.addShortcodesToParent(i.id,j,f)}),c.Events.bind("loadModuleskin",function(a,d,e,f,g,h){var i,j,k,l,m,n,o,p=c.shortcodes[e],q=b('[sed_model_id="'+d+'"]').length>0?c.pageBuilder.getPostId(b('[sed_model_id="'+d+'"]')):c.pageBuilder.currentPostId,r=c.contentBuilder.getShortcode(d);if(h=!_.isUndefined(h)&&h,p.asModule&&c.dataModulesSkins&&r&&(n=r.parent_id,i=p.moduleName,c.dataModulesSkins[i])){if(dataSkin=c.dataModulesSkins[i][f],l=dataSkin.pattern,b.isArray(l)&&0!=l.length||(l=c.defaultPatterns[e]),_.isEmpty(l)||!l)return void alert("invalid skin pattern , this skin not have valid files ");b('[sed_model_id="'+d+'"]').length>0&&(c.pageBuilder.currentPostId=c.pageBuilder.getPostId(b('[sed_model_id="'+d+'"]'))),m=c.pageBuilder.loadPattern(l,n);var s=c.contentBuilder.getShortcodeIndex(d),t=c.contentBuilder.findAllTreeChildrenShortcode(d,q);t.unshift(r);var u=c.contentBuilder.getHelperTreeIds(d,q);_.each(u,function(a){t.push(c.contentBuilder.getShortcode(a))});var v=b.extend(!0,{},t);c.contentBuilder.deleteModule(d,q);var w=function(a,d,e){if(o=_.findWhere(d,{tag:r.tag}),!_.isUndefined(o.attrs.override_skins)){var f=o.attrs.override_skins.split(",");if(f=_.map(f,function(a){return b.trim(a).toLowerCase()}),skin=_.isUndefined(r.attrs)||_.isUndefined(r.attrs.skin)?"default":r.attrs.skin,b.inArray(skin.toLowerCase(),f)>-1)return d}var g=_.map(a,_.clone),h=_.map(d,function(a,d){var f=_.find(g,function(b){return b[e]===a[e]});return f?(g=_.filter(g,function(a){return!_.isEqual(a,f)}),"content"==a[e]&&(a.content=_.clone(f.content)),arr2objCopy=_.clone(a),a.attrs=b.extend({},f.attrs,a.attrs),_.isUndefined(c.shortcodes[a[e]])||_.isUndefined(c.shortcodes[a[e]].retain_attrs)||!b.isArray(c.shortcodes[a[e]].retain_attrs)||_.each(c.shortcodes[a[e]].retain_attrs,function(b){_.isUndefined(f.attrs[b])||(a.attrs[b]=_.clone(f.attrs[b]))}),o.id==a.id&&(o=a),a):a});return h};m=b.extend(!0,{},w(v,m,"tag")),m=c.pageBuilder.setHelperShortcodes(m,r.tag,"tag"),m=c.pageBuilder.shortcodesPatternFilter(m),o.attrs.skin=f,_.isUndefined(r.attrs)||_.isUndefined(r.attrs.parent_module)||(m=_.map(m,function(a){return _.isUndefined(a.attrs)&&(a.attrs={}),a.id==o.id&&(a.attrs.parent_module=r.attrs.parent_module),a})),c.contentBuilder.addShortcodesToParent(n,m,q,s),j=dataSkin.js,k=dataSkin.css;var x=function(){var a=c.sedShortcode.getPatternScripts(m),d=c.sedShortcode.getPatternStyles(m);b.isArray(a)&&a.length>0&&c.pageBuilder.moduleScriptsLoad(a),b.isArray(d)&&d.length>0&&c.pageBuilder.moduleStylesLoad(d),o.attrs.sed_model_id=o.id;b('[sed_model_id="'+o.id+'"]').parents(".sed-pb-module-container:first");c.preview.send("changeCurrentElementBySkinChange",{elementId:o.id,shortcode_name:e,attrs:o.attrs})},y=function(){if(c.contentBuilder.updateShortcodeAttr("skin",f,o.id),"group"!=g)if(c.currentSedElementId=o.id,h===!1)c.contentBuilder.refreshModule(n),x();else if(h===!0)c.preview.send("moduleForceRefresh");else if("ajax"==h){var a=function(a){b('[sed_model_id="'+o.parent_id+'"]').replaceWith(a.data),x()};c.pageBuilder.ajaxLoadModules(o.parent_id,a)}},z=c.sedShortcode.getPatternModulesScripts(m);if(_.isUndefined(z))y();else{var A=c.pageBuilder._checkLoadedScript(z,c.pageBuilder.wpScripts);b.isArray(A)&&A.length>0?c.pageBuilder.moduleScriptsLoad(A,y):y()}}}),b(".wow").livequery(function(){b(this).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){b(this).css("animation-name","none")})}),b("#page").find("[data-sed-animation]").livequery(function(){b(this).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var a="sed-pb-animations-"+b(this).attr("sed_model_id");b(this).removeClass("animated"),b(this).css("animation-name","none"),b("#"+a).length>0&&b("#"+a).remove()})}),c.Events.bind("startChangePreviewMode",function(a){"on"==a?b("#page").find("[data-sed-animation]").addClass("wow"):"off"==a&&b("#page").find("[data-sed-animation]").removeClass("wow")});var f=function(a){var b=/^\s*(\+|-)?\d+\s*$/;return String(a).search(b)!=-1},g=function(a,c,d){var e=c.data("sedAnimation");e&&(c.removeClass(e),c.removeClass("animated"),c.removeClass("wow"),c.css({animationName:"",visibility:"",animationIterationCount:"",animationDuration:"",animationDelay:""})),c.addClass(a+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){b(this).removeClass("animated"),b(this).css("animation-name","none"),b("#"+d).length>0&&b("#"+d).remove()})};c.fn.setAnimation=function(a,c){var d,e,h="sed-pb-animations-"+_.uniqueId("animations_preview"),i="",j=b(c);if(a=a.split(","),!a)return j.removeData("sedAnimation"),j.removeAttr("data-sed-animation"),void(b("#"+h).length>0&&b("#"+h).remove());if(_.isUndefined(a[3])||!_.isString(a[3])||!b.trim(a[3])){var k=j.data("sedAnimation");return k&&j.hasClass(k)&&j.removeClass(k),j.removeData("sedAnimation"),j.removeAttr("data-sed-animation"),void(b("#"+h).length>0&&b("#"+h).remove())}!_.isUndefined(a[2])&&f(a[2])?(j.attr("data-wow-duration",a[2]+"ms"),i+="-webkit-animation-duration: "+a[2]+"ms;animation-duration: "+a[2]+"ms;"):(j.removeAttr("data-wow-duration"),j.removeData("wowDuration")),!_.isUndefined(a[0])&&f(a[0])?(j.attr("data-wow-delay",a[0]+"ms"),i+="-webkit-animation-delay: "+a[0]+"ms;animation-delay: "+a[0]+"ms;"):(j.removeAttr("data-wow-delay"),j.removeData("wowDelay")),!_.isUndefined(a[1])&&f(a[1])?(j.attr("data-wow-iteration",a[1]),d=a[1]==-1?"infinite":a[1],i+="-webkit-animation-iteration-count: "+d+";animation-iteration-count: "+d+";"):(j.removeAttr("data-wow-iteration"),j.removeData("wowIteration")),!_.isUndefined(a[4])&&f(a[4])?j.attr("data-wow-offset",a[4]):(j.removeAttr("data-wow-offset"),j.removeData("wowOffset")),i&&(b("#"+h).length>0&&b("#"+h).remove(),e=b('<style type="text/css" id="'+h+'">'+c+"{ "+i+" }</style>").appendTo(b("head")),g(a[3],j,h),j.data("sedAnimation",a[3]),j.attr("data-sed-animation",a[3]))},c.Events.bind("set_animation",function(a,d){var e=a[d].animation,f=(b('[sed_model_id="'+d+'"]'),'[sed_model_id="'+d+'"]');c.fn.setAnimation(e,f)}),c.addModelPattern=function(a){var d={type:"single",attrs:[],refresh:!0,onRemove:function(){},onCreate:function(){},onAddPatten:function(){},onAfterCreate:function(){},onAfterSingleCreate:function(){},onAfterRemove:function(){}};_.extend(d,a);var e=d.newValue,f=d.oldValue,g=d.type;if(b.isNumeric(e)&&(e=parseInt(e),_.isUndefined(d.min)||!(e<d.min))){if(!_.isUndefined(d.max)&&e>d.max)return void alert("max Item is "+d.max);if(f!=e)if(f<e){for(var h=0;h<e-f;h++)"single"==g?(d.onCreate(),c.Events.trigger("sed_add_new_shortcode_element",d.patternId,d.attrs[h]||[],d.shortcode_name,d.onAddPatten,d.id,d.refresh)):"multiple"==g&&d.group.each(function(a,e){var f=_.isUndefined(d.list)?b(this):b(this).find(d.list);d.onCreate(),c.Events.trigger("sed_add_new_shortcode_element",d.patternId,d.attrs[h]||[],d.shortcode_name,d.onAddPatten,f.attr("sed_model_id"),d.refresh)}),d.onAfterSingleCreate();d.onAfterCreate()}else{for(var h=1;h<=f-e;h++)"single"==g?(d.onRemove(d.list.eq(f-h)),c.remove(d.list.eq(f-h).attr("sed_model_id"))):"multiple"==g&&d.group.each(function(a,e){var g=_.isUndefined(d.list)?b(this):b(this).find(d.list);d.onRemove(g.find(d.memberG).eq(f-h)),c.remove(g.find(d.memberG).eq(f-h).attr("sed_model_id"))});d.onAfterRemove()}}},c.Events.bind("sed_add_new_shortcode_element",function(a,d,e,f,g,h){var i=a,g=g?g:b('[sed_model_id="'+i+'"]').prev().attr("sed_model_id"),j=c.pageBuilder.addNewShortcodeElement(i,d,g),k=c.pageBuilder.getPostId(b('[sed_model_id="'+i+'"]')),h=!!_.isUndefined(h)||h;c.contentBuilder.addShortcodesToParent(g,j,k),h&&c.Events.trigger("syncModuleTmpl",g,e),"function"==typeof f&&f()}),c.fn.setNumberColumns=function(a,c){var d=(c.attr("sed_model_id"),c.find(".sed-products-list"));b.each([1,2,3,4,5,6],function(a,b){d.find(".sed-item-product").hasClass("sed-column-"+b)&&d.find(".sed-item-product").removeClass("sed-column-"+b)}),a>6?a=6:a<1&&(a=1);var e="sed-column-"+a;if(d.find(".sed-item-product").addClass(e),d.hasClass("sed-products-masonry"))d.masonry();else if(d.hasClass("sed-products-grid")){var f='[sed_model_id="'+module_id+'"] .sed-products-grid .sed-item-product:nth-of-type('+a+"n+1){ clear: both;}";b("#sed-products-grid-clear").remove(),b("head").append('<style id="sed-products-grid-clear" type="text/css">'+f+"</style>")}},c.fn.setSpacing=function(a,b){var c=b.find(".sed-products-list");c.find(".sed-item-product").css({padding:a+"px"}),c.hasClass(".sed-products-masonry")&&b.find(".sed-products-masonry").masonry()},c.fn.setBoundary=function(a,b){var c=b.find(".sed-products-list");a?c.addClass("product-boundary"):c.removeClass("product-boundary")},c.preview.bind("subShortcodesAttrUpdate",function(a){var d=a["class"],e=c.currentSedElementId,f=a.attr,g=a.value;b.isArray(g)&&(g=g.join(","));var h=c.contentBuilder.getShortcode(e),i=c.pageBuilder.getPostId(b('[sed_model_id="'+e+'"]')),j=c.contentBuilder.findAllTreeChildrenShortcode(h.parent_id,i),k=_.filter(j,function(a){return!_.isUndefined(a.attrs)&&!_.isUndefined(a.attrs["class"])&&a.attrs["class"]==d});_.each(k,function(a){c.contentBuilder.updateShortcodeAttr(f,g,a.id)})}),c.fn.updateGroupIcons=function(a,d,e){var f=c.contentBuilder.getShortcode(a),g=c.pageBuilder.getPostId(b('[sed_model_id="'+a+'"]')),h=c.contentBuilder.findAllTreeChildrenShortcode(f.parent_id,g),i=_.filter(h,function(a){return!_.isUndefined(a.tag)&&"sed_icons"==a.tag});_.each(i,function(a){c.contentBuilder.updateShortcodeAttr(d,e,a.id)})},c.fn.changeIcon=function(a){var d=a.className,e=b('[sed_model_id="'+c.currentSedElementId+'"]').find(".hi-icon");e.removeClass(e.attr("sed-icon")).addClass(d),e.attr("sed-icon",d),e.trigger("sed.changeIconClass",[d])},c.preview.bind("change_icon",function(a){c.Events.trigger("change_icon_"+a.shortcodeName,a)}),c.fn.getAttachmentImageFullSrc=function(a){var b;a>0&&(b=_.findWhere(c.attachmentsSettings,{id:parseInt(a)}));var d=SEDNOPIC.url;return _.isUndefined(b)||!b||_.isUndefined(b.url)||(d=_.isUndefined(b.sizes)||_.isUndefined(b.sizes.full)?b.url:b.sizes.full.url),d},c.fn.getAttachmentImage=function(a,b,d){var e,f,g,h,i,j,k;if(a=parseInt(a),a>0&&(e=_.findWhere(c.attachmentsSettings,{id:parseInt(a)})),_.isUndefined(e)||!e||_.isUndefined(e.url))f=SEDNOPIC.url,g="auto",h="auto",i="",j="",k="";else{if("image"!=e.type)return alert("Attachment With ID : "+a+" is not image."),!1;if(b=_.isUndefined(b)?"thumbnail":b,d=!_.isUndefined(d)&&d){if(_.isString(b)){b=b.toLowerCase();var l=b.split("x");2==l.length&&(h=parseInt(l[0]),g=parseInt(l[1]),f=e.url)}}else _.isUndefined(e.sizes)||_.isUndefined(e.sizes[b])?_.isUndefined(e.sizes)||_.isUndefined(e.sizes.large)?_.isUndefined(e.sizes)||_.isUndefined(e.sizes.full)||(f=e.sizes.full.url,b="full"):(f=e.sizes.large.url,b="large"):f=e.sizes[b].url;f?_.isUndefined(e.sizes)||_.isUndefined(e.sizes[b])||(g=e.sizes[b].height,h=e.sizes[b].width):(f=e.url,g=e.height,h=e.width),i=e.caption,j=e.description,k=e.title}return{src:f,width:h,height:g,title:k,caption:i,description:j}},c.fn.getAttachmentImageHtml=function(a,b,d,e){var f,g=c.fn.getAttachmentImage(a,b,d),h="";if(!g||!_.isObject(g))return"";var i="",j=g.title;return _.isObject(e)&&_.each(e,function(a,b){"class"==a?i+=b:"alt"==a?j=b:h+=a+'="'+b+'" '}),f='<img width="'+g.width+'" height="'+g.height+'" src="'+g.src+'" alt="'+j+'" '+h+' class="'+i+'">'},c.fn.getSedAttachmentImageHtml=function(a,b,d,e,f,g){var h="";if("attachment"==a){var i=!!_.isEmpty(e);h=i?c.fn.getAttachmentImageHtml(b,f,i,g):c.fn.getAttachmentImageHtml(b,e,!1,g)}else if("external"==a&&!_.isEmpty(d)){var j="auto",k="auto";if(_.isString(f)){var l=f.toLowerCase(),m=l.split("x");2==m.length&&(j=parseInt(m[0]),k=parseInt(m[1]))}h='<img src="'+d+'" height="'+k+'" width="'+j+'" />'}return h},c("archive_pagination_type",function(a){a.bind(function(a){"pagination"!=a?b(".module-pagination").addClass("hide"):b(".module-pagination").removeClass("hide"),"button"!=a?b(".load-more-posts-btn").addClass("hide"):b(".load-more-posts-btn").removeClass("hide")})}),c.preview.bind("moduleDragStart",function(){b("body").addClass("module-dragging-mode")}),c.preview.bind("moduleDragStop",function(){b("body").removeClass("module-dragging-mode")}),c.preview.bind("modulesGuidelineOff",function(){b("body").removeClass("modules-guideline-on")}),c.preview.bind("modulesGuidelineOn",function(){b("body").addClass("modules-guideline-on")})})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.currentModuleElement=c.currentModuleElement||"",c.SiteEditorContextmenu=c.Class.extend({initialize:function(a,c){var d=this;this.params={},b.extend(this,c||{}),d.ready()},ready:function(){},send:function(a,b){this.preview.send(a,b)}}),c.RowContextmenu=c.SiteEditorContextmenu.extend({ready:function(){var a=this;a.preview.bind("contextmenu",function(d){var e,f=d.settingsValid;b(a.params.selector).jeegoocontext(a.params.menu_id,{onShow:function(a,d){if("on"==c.appPreview.mode)return!1;e=b(d);var g=(e.parents(".sed-pb-module-container:first"),e.attr("sed-role")||"custom-row"),h=b("[sed-role='footer']").length,i=b("[sed-role='header']").length;b(".element-settings","#main_row_contextmenu").attr("sed-dialog","dialog-settings-"+g),f[g]&&f[g]!==!1?b(".element-settings","#main_row_contextmenu").removeClass("context-menu-item-disable"):b(".element-settings","#main_row_contextmenu").addClass("context-menu-item-disable"),b(".row-type-item","#main_row_contextmenu").each(function(){1==h&&"footer"!=g&&"footer"==b(this).attr("sed-value")?b(this).addClass("context-menu-item-disable"):"footer"==b(this).attr("sed-value")&&b(this).removeClass("context-menu-item-disable"),1==i&&"header"!=g&&"header"==b(this).attr("sed-value")?b(this).addClass("context-menu-item-disable"):"header"==b(this).attr("sed-value")&&b(this).removeClass("context-menu-item-disable"),g==b(this).attr("sed-value")?b(this).addClass("row-type-item-active"):b(this).removeClass("row-type-item-active")})}}),b(".row-type-item").on("click",function(){if(!b(this).hasClass("context-menu-item-disable")){var c=b(this).attr("sed-value");e.attr("sed-role",c),b(".row-type-item").removeClass("row-type-item-active"),b(this).addClass("row-type-item-active"),b(".element-settings",$thisMenu).attr("sed-dialog","dialog-settings-"+c),f[c]&&f[c]!==!1?b(this).parents(".context-menu-root:first").find(".element-settings").removeClass("context-menu-item-disable"):b(this).parents(".context-menu-root:first").find(".element-settings").addClass("context-menu-item-disable"),a.send("change_role_row",{id:e.attr("sed_model_id"),role:c})}})})}}),c.ElementContextmenu=c.SiteEditorContextmenu.extend({ready:function(){var a=this,d="module_"+a.params.shortcode+"_contextmenu",e="."+d,f="module_"+a.params.shortcode+"_contextmenu_container",g="."+f,h=a.params.menu_id+"_cover",i="."+h;b(e+","+g+","+i).jeegoocontext(a.params.menu_id,{onShow:function(d,e){var f=!1;return"on"!=c.appPreview.mode&&f!==!0&&(e=a.getModuleContext(e),b(e).length>0&&b(this).find("li.contextmenu-item-container").each(function(c,d){_.extend(b(this).data(),a.getDataContextMenu(e)||{})}),void c.contextmenu.onShow(d,e,b(this)))},onSelect:function(d,e){e=a.getModuleContext(e),c.contextmenu.onSelect(d,e,b(this))}})},getModuleContext:function(a){var c=this,d="module_"+c.params.shortcode+"_contextmenu",e="."+d,f="module_"+c.params.shortcode+"_contextmenu_container",g=c.params.menu_id+"_cover";return b(a).hasClass(f)?a=b(a).find(e+":first"):b(a).hasClass(g)&&(a=b(a).siblings(e+":first")),a},getDataContextMenu:function(a){var c={};return b.each(b(a).data(),function(a,b){var d=/^contextmenu(.*)/g;d.test(a)&&(c[a]=b)}),c}}),c.Contextmenu=c.Class.extend({initialize:function(a,c){var d=this;this.params=a,b.extend(this,c||{}),d.ready()},ready:function(){},onShow:function(a,d,e){$thisElement=b(d),c.selectPlugin.select(b(d));var f=e.find(".modules-arrangement"),g=$thisElement.parents('[sed-layout-role="pb-module"]:first');"static-element"==g.attr("data-type-row")?f.addClass("contextmenu-hide-item"):"draggable-element"==g.attr("data-type-row")&&f.removeClass("contextmenu-hide-item"),c.Events.trigger("sedShowContextmenu",a,d,e)},onSelect:function(a,b,d){var e=d.data("action");e&&c.Events.trigger("ctxtAct_"+e,a,b,d)}}),c.contextmenuConstructor={row:c.RowContextmenu,element:c.ElementContextmenu},b(function(){c.settings=window._sedAppEditorSettings,b.each(c.contextMenuSettings,function(a,b){var d,e=c.contextmenuConstructor[b.type]||c.SiteEditorContextmenu;d=new e(a,{params:b,preview:c.preview})}),c.contextmenu=new c.Contextmenu({},{preview:c.preview}),b.each(c.itemContextMenuSettings,function(a,c){b("#"+a).data("options",c.options)}),b(".element-open-dialog").livequery(function(){b(this).on("click",function(){if(!b(this).hasClass("context-menu-item-disable")){var a=$thisElement.attr("sed_model_id");c.preview.send("element_open_dialog",{tmpl:b(this).attr("sed-dialog-tmpl-id"),selector:b(this).attr("sed-dialog-selector"),data:b(this).data(),id:b(this).attr("sed-dialog-id"),options:b(this).data("options"),extra:{attrs:c.contentBuilder.getAttrs(a,!0)||{}}}),b(document).trigger(b(this).attr("sed-dialog-id"),[this])}})}),c.Events.bind("ctxtAct_openDialogSettings",function(a,b,d){var e=$thisElement.attr("sed_model_id");c.preview.send("openDialogSettings",{selector:d.attr("sed-dialog-selector"),data:d.data(),extra:{attrs:c.contentBuilder.getAttrs(e,!0)||{}}}),c.pageBuilder.sendRowData($thisElement)}),b('[data-action="formElement"]').livequery(function(){b(this).on("click",function(a){a.stopPropagation()})}),c.Events.bind("ctxtAct_duplicate",function(a,b,d){$thisElement.attr("sed_model_id");c.duplicate($thisElement)});var a=function(a,d){var e=c.pageBuilder.getPostId(a),f=a.parents(".sed-pb-module-container:first").attr("sed_model_id"),g=c.contentBuilder.findAllTreeChildrenShortcode(f,e);d.media_attrs;g=_.map(g,function(d){if(d.id==a.attr("sed_model_id")){var e=c.shortcodes[d.tag];d.attrs=b.extend({},e.attrs,d.attrs)}return d}),c.preview.send("openMediaLibrary",{moduleId:a.attr("sed_model_id"),options:d,models:g,moduleContainerId:f})};c.Events.bind("ctxtAct_openMediaLibrary",function(c,d,e){var f=e.data("options");a(b(d),f)}),c.preview.bind("openMediaLibraryEditGallery",function(d){a(b('[sed_model_id="'+c.currentSedElementId+'"]'),{media:d})}),c.preview.bind("updateMediaListModule",function(a){var d=c.pageBuilder.getPostId(b('[sed_model_id="'+a.moduleContainerId+'"]')),e=(c.contentBuilder.getShortcode(a.moduleContainerId),[]);c.contentBuilder.deleteModuleTreeChildren(a.moduleContainerId,d),c.contentBuilder.addShortcodesToParent(a.moduleContainerId,a.shortcodes,d);var f=function(){c.contentBuilder.contentModel[d]=_.map(c.contentBuilder.contentModel[d],function(a){if(a.newModel===!0){var f=c.pageBuilder.getNewId();_.isUndefined(a.attrs)||_.isUndefined(a.attrs.sed_main_media)||!a.attrs.sed_main_media||(e.push({attachment:b.extend(!0,{},a.attrs.attachment_model),
targetElement:f,shortcode:a.tag}),delete a.attrs.attachment_model),c.contentBuilder.contentModel[d]=_.map(c.contentBuilder.contentModel[d],function(b){return a.id===b.parent_id&&(b.parent_id=f),b}),a.id=f,a.attrs.sed_model_id=f,delete a.newModel}return a})};f(),_.each(e,function(a){c.preview.trigger("syncMediaAttachments",a)}),c.contentBuilder.refreshModule(a.moduleId)})})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.DeletePlugin=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready(),this.elementId},ready:function(){this.removeAlert()},remove:function(a,b){this.elementId=a,c.Events.trigger("sedBeforeRemove",a),c.Events.trigger("before-remove-"+a),this.removeFromShortcodes(),this.removeFromUsingModules(),this.removeFromStyleEditor(),this.removeFromDom(),c.Events.trigger("sedAfterRemove",a),c.Events.trigger("after-remove-"+a),b&&b()},removeAlert:function(){var a=this;b(".sed-handle-sort-row .remove_pb_btn").livequery(function(){b(this).parents(".sed-row-pb:first").hasClass("sed-main-content-role")||b(this).parents(".sed-row-pb:first").hasClass("sed-main-content-row-role")?b(this).addClass("disabled"):b(this).on("click",function(){c.preview.send("sedRemoveModuleElementsSync",b(this).data("moduleRelId"))})}),c.preview.bind("sedRemoveModulesApply",function(d){var e=b('[sed_model_id="'+d+'"]').parents(".sed-pb-component:first");a.remove(d),e.length>0&&c.pageBuilder.addRemoveSortableClass(e)})},removeFromDom:function(){b('[sed_model_id="'+this.elementId+'"]').detach()},removeFromShortcodes:function(){var a=c.pageBuilder.getPostId(b('[sed_model_id="'+this.elementId+'"]'));c.contentBuilder.deleteModule(this.elementId,a)},removeFromUsingModules:function(){var a=this;c.pageModulesUsing=_.filter(c.pageModulesUsing,function(b){return b.id!=a.elementId})},removeFromStyleEditor:function(){}}),b(function(){c.removePlugin=new c.DeletePlugin,c.remove=function(a,b){c.removePlugin.remove(a,b)}})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.currentModule=c.currentModule||"",c.isOpenDialogSettings=c.isOpenDialogSettings||!1,c.SelectPlugin=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready(),this.elementId},ready:function(){var a=this;b(".sed-pb-module-container").livequery(function(){b(this).on("click",function(d){a.resizing===!0||"on"==c.appPreview.mode||b(this).is("[sed-disable-editing='yes']")||(d.preventDefault(),d.stopPropagation(),a.select(b(this),b(d.target).hasClass("sed_setting_btn_cmp")))})}),b("body").on("click",function(a){b(".sed-pb-module-container").each(function(){b(this).is(a.target)||0!==b(this).has(a.target).length||(c.preview.send("dialogSettingsClose"),c.isOpenDialogSettings=!1,c.currentSedElementId="")})})},select:function(a,d,e){if("on"==c.appPreview.mode)return!1;if(d=!_.isUndefined(d)&&d,a.hasClass("sed-static-module"))return void c.preview.send("openAppSettings",{settingId:a.data("staticModuleId"),forceOpen:d,reset:e});a.hasClass("sed-bp-module")&&(a=a.find(".sed-pb-module-container:first")),a.hasClass("sed-row-pb")&&(a=a.find(">.sed-pb-module-container .sed-pb-module-container:first"));var f=a.attr("sed_model_id");a.parents(".sed-pb-module-container:first");if(f&&(c.currentSedElementId!=f||c.isOpenDialogSettings!==!0)){var g=c.contentBuilder.getShortcode(f);if(g){var h=c.shortcodes[g.tag];c.currentModule=h.moduleName,c.preview.send("currentElementId",f),c.currentSedElementId=f,c.preview.send("currentPostId",b('[sed_model_id="'+f+'"]').parents(".sed-pb-post-container:first").data("postId")),c.pageBuilder.sendRowData(a);var i=b.extend({},this.getDataContextMenu(a)||{},{shortcodeName:g.tag});e=!!_.isUndefined(e)||e,c.preview.send("currentModuleSelected",{selector:g.tag,forceOpen:d,reset:e,data:i,extra:{attrs:c.contentBuilder.getAttrs(f,!0)}})}}},getDataContextMenu:function(a){var c={};return b.each(b(a).data(),function(a,b){var d=/^contextmenu(.*)/g;d.test(a)&&(c[a]=b)}),c}}),b(function(){c.selectPlugin=new c.SelectPlugin})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.MediaPlugin=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready(),this.ready},ready:function(a){var b=this;c.preview.bind("syncMediaAttachments",function(a){b.syncMediaAttachments(a)})},syncMediaAttachments:function(a){var b=a.attachment;a.targetElement,a.shortcode;c.attachmentsSettings=_.filter(c.attachmentsSettings,function(a){return a.id!=b.id}),c.attachmentsSettings.push(b)}}),b(function(){c.mediaPlugin=new c.MediaPlugin})}(sedApp,jQuery),function(a,b){var c=sedApp.editor;c.DuplicatePlugin=c.Class.extend({initialize:function(a,c){b.extend(this,c||{}),this.ready(),this.elementId,this.newElementId,this.Ids={}},ready:function(){var a=this;b(".sed-handle-sort-row .duplicate_pb_btn").livequery(function(){b(this).on("click",function(){a.duplicate(b(this).parents(".sed-bp-element:first"))})})},syncStyleEditorPreview:function(a){var d=this;b.each(a,function(a,e){var f=/\[\s*(sed_model_id)\s*=\s*["\']?([^"\']*)["\']?\s*\]/g,g=a.replace(f,'[sed_model_id="'+d.newElementId+'"]');b.each(e,function(a,b){c.preview.trigger("current_css_setting_type","module"),c.preview.trigger("current_css_selector",g),c(a).set(b)})})},duplicate:function(a,d){var e=this;a.hasClass("sed-bp-module")?a=a.find(".sed-pb-module-container:first"):a.hasClass("sed-row-pb")&&(a=a.find(">.sed-pb-module-container .sed-pb-module-container:first")),this.elementId=a.attr("sed_model_id"),c.Events.trigger("sedBeforeDuplicate",this.elementId),c.Events.trigger("before-duplicate-"+this.elementId);var f,g=this.elementId,h=c.pageBuilder.getPostId(b('[sed_model_id="'+g+'"]')),i=c.contentBuilder.getShortcode(g),j=i.parent_id,k=c.contentBuilder.findAllTreeChildrenShortcode(j,h),l=c.contentBuilder.getShortcode(j),m=c.contentBuilder.getShortcode(l.parent_id),n=c.contentBuilder.getShortcodeIndex(m.id);k.unshift(m,l);var o=c.sedShortcode.clone(k);o=this.modifyModels(o),o=c.pageBuilder.setHelperShortcodes(o,i.tag,"tag"),o=c.pageBuilder.shortcodesPatternFilter(o),this.newElementId=o[2].id,f=o.length+n,c.contentBuilder.addShortcodesToParent(m.id,o,h,f),c.pageBuilder.syncStyleEditorPreview(o),console.log("------------newPattern--------",o);var p=function(a){var f=b(a).insertAfter(b('[sed_model_id="'+m.id+'"]'));c.selectPlugin.select(b('[sed_model_id="'+e.newElementId+'"]'),!1),c.Events.trigger("sedAfterDuplicate",g,f),c.Events.trigger("after-duplicate-"+g),"function"==typeof d&&d()},q=c.sedShortcode.getPatternTransport(o);if("ajax"==q){var r=function(a){p(a.data)};c.pageBuilder.ajaxLoadModules(o[0].id,r)}else{var s=c.contentBuilder.do_shortcode("sed_row",o[0].id,o[0].id);p(s)}},modifyModels:function(a){var b=this;return this.Ids={},a=_.map(a,function(a){var d=c.pageBuilder.getNewId();return b.Ids[a.id]=d,a.id=d,a.attrs.sed_model_id=d,a}),a=_.map(a,function(a){return _.isUndefined(b.Ids[a.parent_id])||(a.parent_id=b.Ids[a.parent_id]),a})}}),b(function(){c.duplicatePlugin=new c.DuplicatePlugin,c.duplicate=function(a,b){c.duplicatePlugin.duplicate(a,b)}})}(sedApp,jQuery);