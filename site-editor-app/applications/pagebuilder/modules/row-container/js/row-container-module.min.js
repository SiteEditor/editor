(function( exports, $ ) {
    var api = sedApp.editor;

    $( function() {

        api.Events.bind( "sed_row_container_length" , function( modules , elementId , value ){
            var parentRow = $('[sed_model_id="' + elementId + '"]').parents(".sed-pb-module-container:first").parent() ,
                attrValue = ( _.isUndefined(value) ) ? modules[elementId]["length"] : value ,
                targEl ,
                parentRowId = parentRow.attr("sed_model_id");

            if( !_.isUndefined( $( '[sed_model_id="' + parentRowId + '"]' ).attr("length_element") ) )
                targEl = $( '[sed_model_id="' + parentRowId + '"]' );
            else
                targEl = $( '[sed_model_id="' + parentRowId + '"]' ).find("[length_element]");

            if(attrValue == "boxed")
                targEl.addClass( "sed-row-boxed" ).removeClass("sed-row-wide");
            else
                targEl.addClass( "sed-row-wide" ).removeClass("sed-row-boxed");

            api.contentBuilder.updateShortcodeAttr( "length"  , attrValue , parentRowId );
        });

    });


}(sedApp, jQuery));